{"version":3,"sources":["gameControl/actionTypes.js","constants.js","utils/index.js","gameControl/reducer.js","chessBoard/actionTypes.js","chessBoard/actions.js","utils/controlClients/SocketClient.js","player/actions.js","player/actionTypes.js","utils/boardUtils.js","chessBoard/views/chessItem.js","utils/ai/ai.js","utils/controlClients/AIClient.js","gameControl/views/gamePlaying.js","menu/menuPage.js","menu/RoomMenu.js","gameControl/views/routeControl.js","chessBoard/views/chessBoard.js","player/views/cardItem.js","player/views/playerZone.js","player/views/publicZone.js","player/views/gameBoard.js","App.js","Store.js","player/reducer.js","chessBoard/reducer.js","index.js"],"names":["RESET","UPDATE_SOCKET","ChessTypes","findChessPos","board","chessId","selectPos","i","length","row","j","id","x","y","createChess","player","chessType","type","createBearFrogBoard","getInitState","players","name","order","local","nowPlayer","chessBoard","selected","selectId","gameControl","socketContainer","constructor","this","socketClient","setSocketClient","bind","getSocketClient","s","SELECT","MOVE_TO","SET_BOARD","setBoard","SocketAPI","connect","host","ws","WebSocket","onclose","e","isTrusted","alert","JSON","stringify","onerror","disconnect","close","send","data","setOnMessage","func","onmessage","setOnOpen","onopen","gameMessage","isRoundEnd","arguments","undefined","needMessage","setLocalPlayer","flatten","arr","reduce","pre","val","concat","Array","isArray","getNextPosList","maxX","maxY","gx","gy","moveList","x2","y2","push","judgeCanBeMoveTo","_ref","indexOf","doMoveAction","now","newBoard","map","item","_objectSpread","temp","typeChangeInfo","reason","isHorizon","ii","allLength","maxAllLength","selfLength","maxSelfLength","selfSize","enemyList","jj","Math","max","doKill","judgeGameOver","orderSequence","flatBoard","playerChessCount","key","gameOver","winners","parseInt","playerCanMoveCount","forEach","overs","Object","keys","console","log","ChessComponent","props","iconClassName","children","React","createElement","className","xmlns","width","height","viewBox","dominantBaseline","textAnchor","style","fontSize","ChessItem","Component","context","super","state","componentWillReceiveProps","nextProps","render","beSelected","canBeMoveTo","onSelect","onMoveTo","canBeSelect","playerNames","icon","onClick","mapStateToProps","AI","getTheMove","moves","one","next","min","ceil","floor","random","getNextBoard","theMove","AIClient","funcs","onMessage","onOpen","store","timeout","clearTimeout","setTimeout","realNowPlayer","newNowPlayer","resData","PlayControl","roomId","vsAI","process","SocketClient","event","parse","onReceiveBoard","preGameOver","getPlayerNames","resetAll","componentWillUnmount","params","ChessBoard","dispatch","setNowPlayer","buttonList","title","url","urlFunc","randomNumber","menuPage","urlParams","location","search","qs","ignoreQueryPrefix","gameNameDisplay","names","buttonData","Button","raised","history","OnePlayerPanel","playerName","value","readOnly","CopyToClipboard","text","onCopy","onJump","RoomMenu","href","pathname","window","urlPrefix","split","paramsString","outlined","RouteControl","playControl","match","others","_objectWithoutProperties","_excluded","assign","playerId","hasAI","Switch","Route","path","component","exact","select","moveTo","rowKey","index","ownProps","active","game","cardPlayed","isShow","onRemove","typeShow","backgroundColor","PlayerZone","componentDidUpdate","preProps","isNowPlayer","onRemoveCard","isComputer","cards","life","noCard","str","from","nowPlayerName","roundEnd","PublicZone","App","Player","GameControl","win","reducer","combineReducers","action","nextState","filter","todoItem","storeEnhancers","compose","applyMiddleware","devToolsExtension","f","createStore","ReactDOM","Provider","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.f1bedc57.chunk.js","sourcesContent":["export const RESET = 'GAME_CONTROL/RESET';\r\nexport const UPDATE_SOCKET = 'GAME_CONTROL/UPDATE_SOCKET';\r\n","export const ChessTypes = {\r\n  NONE: 'æ— æ£‹',\r\n  NORMAL: 'æœ‰æ£‹',\r\n};\r\n","/**\r\n * Created by yuiff on 2018/3/31.\r\n */\r\nimport { ChessTypes } from '../constants.js';\r\n\r\nconst findChessPos = (board, chessId) => {\r\n  let selectPos = {};\r\n  for (let i = 0; i < board.length; i++) {\r\n    const row = board[i];\r\n    for (let j = 0; j < row.length; j++) {\r\n      // console.log(typeof(i), typeof(j));\r\n      const item = row[j];\r\n      if (item.id === chessId) {\r\n        selectPos = {\r\n          x: i,\r\n          y: j,\r\n        };\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  // console.log(selectPos, chessId, board, typeof(selectPos.x), typeof(selectPos.y));\r\n  return selectPos;\r\n};\r\n\r\nlet chessId = 0;\r\nconst createChess = (player, chessType) => ({\r\n  id: chessId++,\r\n  player,\r\n  type: chessType,\r\n});\r\n\r\nconst createBearFrogBoard = () => {\r\n  const board = [\r\n    [createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL)],\r\n    [createChess(1, ChessTypes.NORMAL), createChess(null, ChessTypes.NONE), createChess(null, ChessTypes.NONE), createChess(1, ChessTypes.NORMAL)],\r\n    [createChess(0, ChessTypes.NORMAL), createChess(null, ChessTypes.NONE), createChess(null, ChessTypes.NONE), createChess(0, ChessTypes.NORMAL)],\r\n    [createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL)],\r\n  ];\r\n  return board;\r\n};\r\n\r\nconst getInitState = () => {\r\n  const initValues = {\r\n    player: {\r\n      players: [\r\n        {\r\n          name: 'ç†Šæ–¹',\r\n        },\r\n        {\r\n          name: 'è›™æ–¹',\r\n        },\r\n      ],\r\n      order: [0, 1],\r\n      local: [0, 1],\r\n      nowPlayer: 0,\r\n    },\r\n    chessBoard: {\r\n      board: createBearFrogBoard(),\r\n      selected: false,\r\n      selectId: -1,\r\n    },\r\n    gameControl: {\r\n    },\r\n  };\r\n  return initValues;\r\n};\r\n\r\nclass SocketContainerClass{\r\n  constructor(){\r\n    this.socketClient = null;\r\n    this.setSocketClient = this.setSocketClient.bind(this);\r\n    this.getSocketClient = this.getSocketClient.bind(this);\r\n  }\r\n  setSocketClient(s) {\r\n    this.socketClient = s;\r\n  }\r\n  getSocketClient () {return this.socketClient}\r\n}\r\n\r\nconst socketContainer = new SocketContainerClass();\r\n\r\nexport { findChessPos, createBearFrogBoard, getInitState, socketContainer };\r\n","import { RESET, UPDATE_SOCKET } from './actionTypes.js';\r\nimport { ChessTypes } from '../constants.js';\r\nimport { getInitState } from '../utils/';\r\n\r\nexport default (state = ChessTypes.NONE, action) => {\r\n  switch (action.type) {\r\n    case RESET: {\r\n      //å¥½åƒå†™çš„ä¸å¯¹ï¼Œä¹Ÿæ²¡ç”¨ä¸Š\r\n      console.log('RESET!', getInitState());\r\n      return getInitState();\r\n    }\r\n    case UPDATE_SOCKET: {\r\n      //è¿™ä¸ªå¥½åƒï¼Œä¹Ÿæ²¡ç”¨ä¸Šï¼Œè¿™ä¸ªä¸œè¥¿éƒ½ä¸æ”¾åœ¨storeé‡Œäº†\r\n      console.log('UPDATE_SOCKET!', action.socketClient);\r\n      const { socketClient } = action;\r\n      return {\r\n        ...state,\r\n        socketClient,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const SELECT = 'CHESS_BOARD/SELECT';\r\nexport const MOVE_TO = 'CHESS_BOARD/MOVE_TO';\r\nexport const SET_BOARD = 'CHESS_BOARD/SET_BOARD';\r\n","import { SELECT, MOVE_TO, SET_BOARD } from './actionTypes.js';\r\n\r\nexport const select = id => ({\r\n  type: SELECT,\r\n  id,\r\n});\r\n\r\nexport const moveTo = id => ({\r\n  type: MOVE_TO,\r\n  id,\r\n});\r\n\r\nexport const setBoard = board => ({\r\n  type: SET_BOARD,\r\n  board,\r\n});\r\n","// const host = 'http://localhost:3000';\r\n// const socketPath = '/socket';\r\n\r\nexport default class SocketAPI {\r\n  ws;\r\n\r\n  connect(host) {\r\n    this.ws = new WebSocket(host);\r\n    this.ws.onclose = (e) => {\r\n      if (!e.isTrusted)\r\n        alert('webSocket onClose!' + JSON.stringify(e));\r\n    };\r\n    this.ws.onerror = (e) => {\r\n      alert('webSocket onError!' + e);\r\n    };\r\n  }\r\n\r\n  disconnect() {\r\n    this.ws.close(1000, 'æ­£å¸¸å…³é—­');//å¾…ç¡®è®¤ï¼Œä¹±å†™çš„\r\n  }\r\n\r\n  send(data) {\r\n    this.ws.send(JSON.stringify(data));\r\n  }\r\n\r\n  setOnMessage(func) {\r\n    this.ws.onmessage = func;\r\n  }\r\n\r\n  setOnOpen(func) {\r\n    this.ws.onopen = func;\r\n  }\r\n\r\n  // on(event, fun) {\r\n  //     // No promise is needed here, but we're expecting one in the middleware.\r\n  //     return new Promise((resolve, reject) => {\r\n  //         if (!this.socket) return reject('No socket connection.');\r\n  //\r\n  //         this.socket.on(event, fun);\r\n  //         resolve();\r\n  //     });\r\n  // }\r\n}\r\n// boardæ£‹ç›˜ï¼ŒnowPlayerå½“å‰å›åˆäººï¼ˆ0/1ï¼‰ï¼Œ isRoundEndä¸æ‡‚æ˜¯å•¥ï¼ŒneedMessageæ˜¯å¦éœ€è¦ç«‹åˆ»è·å–æ£‹ç›˜ä¿¡æ¯ï¼Œä¾‹å¦‚åˆšä¸Šçº¿é¦–æ¬¡è·å–æ£‹ç›˜çš„åœ¨çº¿äºº\r\nconst gameMessage = (board, nowPlayer, isRoundEnd = false, needMessage = false) => {\r\n  return {\r\n    board,\r\n    nowPlayer,\r\n    isRoundEnd,\r\n    needMessage\r\n  };\r\n};\r\n\r\nexport {gameMessage};\r\n","import { SET_LOCAL_PLAYER, ROUND_END } from './actionTypes.js';\r\n\r\nexport const setLocalPlayer = (local, nowPlayer) => ({\r\n  type: SET_LOCAL_PLAYER,\r\n  local,\r\n  nowPlayer,\r\n});\r\n\r\nexport const roundEnd = () => ({\r\n  type: ROUND_END,\r\n});\r\n","export const SET_LOCAL_PLAYER = 'PLAYER/PLAY';\r\nexport const ROUND_END = 'PLAYER/ROUND_END';\r\n","import {ChessTypes} from \"../constants\";\r\nimport {findChessPos} from \"./index\";\r\n\r\nexport const flatten = arr => arr.reduce((pre, val) => pre.concat(Array.isArray(val) ? flatten(val) : val), []);\r\n\r\nexport function getNextPosList(board, x, y) {\r\n  const maxX = board.length;\r\n  const maxY = board[0].length;\r\n  const gx = [0, 0, -1, 1];\r\n  const gy = [1, -1, 0, 0];\r\n  const moveList = [];\r\n  for (const i in gx) {\r\n    const x2 = x + gx[i];\r\n    const y2 = y + gy[i];\r\n    // console.log(x, y, gx[i], gy[i], x2, y2, maxX, maxY, typeof(x), typeof(gx[i]));\r\n    if (x2 >= 0 && x2 < maxX && y2 >= 0 && y2 < maxY && board[x2][y2].type === ChessTypes.NONE) {\r\n      moveList.push(board[x2][y2].id);\r\n    }\r\n  }\r\n  return moveList;\r\n}\r\n\r\n\r\nexport const judgeCanBeMoveTo = ({board, selectId, selected}, chessId) => {\r\n  if (!selected) return false;\r\n  const {x, y} = findChessPos(board, selectId);\r\n  const moveList = getNextPosList(board, x, y);\r\n  // console.log(moveList.indexOf(chessId) !== -1);\r\n  return moveList.indexOf(chessId) !== -1;\r\n};\r\n\r\nexport function doKill(board, x, y, player) {\r\n  for (let isHorizon = 0; isHorizon < 2; isHorizon++) {\r\n    let maxX = board.length;\r\n    let maxY = board[0].length;\r\n    if (isHorizon) [maxX, maxY] = [maxY, maxX];\r\n    const ii = isHorizon ? x : y;\r\n\r\n    let allLength = 0,\r\n      maxAllLength = 0;\r\n    let selfLength = 0,\r\n      maxSelfLength = 0,\r\n      selfSize = 0;\r\n    const enemyList = [];\r\n    for (let jj = 0; jj < maxY; jj++) {\r\n      const [i, j] = isHorizon ? [ii, jj] : [jj, ii];\r\n      const now = board[i][j];\r\n      if (now.type != ChessTypes.NONE) {\r\n        allLength++;\r\n        maxAllLength = Math.max(allLength, maxAllLength);\r\n        if (now.player === player) {\r\n          selfLength++;\r\n          maxSelfLength = Math.max(selfLength, maxSelfLength);\r\n          selfSize++;\r\n        } else {\r\n          enemyList.push(now);\r\n          selfLength = 0;\r\n        }\r\n      } else {\r\n        allLength = 0;\r\n        selfLength = 0;\r\n      }\r\n    }\r\n    if (maxAllLength == 3 && maxSelfLength == 2 && selfSize == 2 && enemyList.length == 1) {\r\n      for (let j = 0; j < enemyList.length; j++) {\r\n        enemyList[j].type = ChessTypes.NONE;\r\n        enemyList[j].typeChangeInfo = {reason: \"DIE\"};\r\n        // enemyList[j].player = -1;\r\n        // playerä¸å˜ï¼Œå› ä¸ºè¦ç”¨è¿™ä¸ªplayerçš„æ­»äº¡åŠ¨ç”»ï¼Œå˜äº†åŠ¨ç”»ä¹Ÿå˜äº†ï¼Œä¸è¡Œ\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ä»now: {x,y}ç§»åŠ¨ä¸€ä¸ªæ£‹åˆ°x,yï¼Œè®¡ç®—killæ“ä½œ\r\nexport function doMoveAction(board, now, x, y) {\r\n  const newBoard = board.map(row =>\r\n    row.map(item => ({...item})));\r\n  // (now.x,now.y) move to x,y\r\n  const temp = newBoard[now.x][now.y];\r\n  newBoard[now.x][now.y] = newBoard[x][y];\r\n  newBoard[x][y] = temp;\r\n\r\n  newBoard[now.x][now.y].typeChangeInfo = {reason: \"LEAVE\", x, y};\r\n  newBoard[x][y].typeChangeInfo = {reason: \"ARRIVE\", x: now.x, y: now.y};\r\n\r\n  const player = newBoard[x][y].player;\r\n  newBoard[now.x][now.y].player = player; //å› ä¸ºç›®å‰çš„åŠ¨ç”»ä¼šæ ¹æ®æ£‹å­çš„playeræ¥ç”»æ£‹å­ï¼Œæ­»äº¡åŠ¨ç”»è¦ç”¨åˆ°è¿™ä¸ªç©ºæ ¼ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ‰“ä¸ªè¿™ä¸ªè¡¥ä¸ã€‚è™½ç„¶ä¸å¤ªåˆé€‚\r\n  doKill(newBoard, x, y, player);\r\n  return newBoard;\r\n}\r\n\r\n\r\nexport function judgeGameOver(board, player = {\r\n  players: [{name: 'A'}, {name: 'B'}],\r\n  order: [0, 1]\r\n}, orderSequence = [0, 1]) {\r\n  const flatBoard = flatten(board);\r\n\r\n  const playerChessCount = {...orderSequence};\r\n  for (const key in playerChessCount) playerChessCount[key] = 0;\r\n  for (const i in flatBoard) {\r\n    flatBoard[i].type=== ChessTypes.NORMAL && playerChessCount[flatBoard[i].player]++;\r\n  }\r\n\r\n  const {players, order} = player;\r\n  let gameOver = false;\r\n  let winners = [];\r\n  // åˆ¤æ–­æ˜¯å¦åªå‰©1æ£‹ï¼Œè¾“æ‰\r\n  for (const key in playerChessCount) {\r\n    if (playerChessCount[key] <= 1) {\r\n      gameOver = true;\r\n    } else if (players[parseInt(key)]) winners.push(parseInt(key));\r\n  }\r\n  if (!gameOver) {\r\n    // åˆ¤æ–­æ˜¯å¦æ— æ£‹å¯èµ°ï¼Œè¾“æ‰\r\n    winners = [];\r\n    const playerCanMoveCount = {...order};\r\n    for (const key in playerCanMoveCount) playerCanMoveCount[key] = {};\r\n    for (let i = 0; i < board.length; i++) {\r\n      for (let j = 0; j < board[i].length; j++) {\r\n        if (board[i][j].type === ChessTypes.NORMAL) {\r\n          const moveList = getNextPosList(board, i, j);\r\n          const player = board[i][j].player;\r\n          moveList.forEach((id) => {\r\n            playerCanMoveCount[player][id] = true;\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    const overs = {};\r\n    for (const key in playerCanMoveCount) {\r\n      if (Object.keys(playerCanMoveCount[key]) <= 0) {\r\n        gameOver = true;\r\n        if (players[parseInt(key)]) overs[key] = true;\r\n      }\r\n    }\r\n    if (gameOver)\r\n      for (const key in playerCanMoveCount) {\r\n        console.log(key, playerCanMoveCount[key], overs[key]);\r\n        if (players[parseInt(key)] && !overs[key]) winners.push(parseInt(key));\r\n      }\r\n    console.log(\"playerCanMoveCount\", board, playerCanMoveCount, overs);\r\n  }\r\n  return {\r\n    gameOver,\r\n    winners\r\n  };\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n// import MdAccessibility from 'react-icons/lib/md/accessibility';\r\nimport {GiBearFace, GiFrogPrince} from 'react-icons/gi'\r\n// import MdAccessible from 'react-icons/lib/md/accessible';\r\n// import MdPets from 'react-icons/lib/md/pets';\r\n// import * as FontAwesome from 'react-icons/lib/fa'\r\nimport {ChessTypes} from '../../constants.js';\r\nimport {findChessPos} from '../../utils';\r\nimport {judgeCanBeMoveTo, getNextPosList} from \"../../utils/boardUtils\";\r\n\r\nconst ChessComponent = (props)=>{\r\n  const {iconClassName, children} = props;\r\n  // return <div className={iconClassName} style={{background: 'red'}}><MdAccessibility className={iconClassName}/>ğŸ»</div>\r\n  return <div className={`${iconClassName}`}>\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" viewBox='0 0 512 512'>\r\n        <text x='50%' y=\"50%\" dominantBaseline=\"central\" textAnchor=\"middle\" style={{fontSize: \"256px\"}} >\r\n          {children}\r\n        </text>\r\n    </svg>\r\n    </div>\r\n  ;\r\n}\r\n\r\nclass ChessItem extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {}\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n  }\r\n\r\n  render() {\r\n    const {player, type, beSelected, canBeMoveTo, onSelect, onMoveTo, canBeSelect, typeChangeInfo} = this.props;\r\n    const { playerNames= ['ğŸ»', 'ğŸ¸'] } = this.props;\r\n    const onClick = () => {\r\n      if (canBeMoveTo) {\r\n        onMoveTo();\r\n      } else if (type != ChessTypes.NONE && canBeSelect) {\r\n        onSelect();\r\n      }\r\n    };\r\n    let iconClassName = `chess-item ${player == 1 ? 'enemy' : ''} `;\r\n    if (type === ChessTypes.NONE) {\r\n      if (typeChangeInfo === \"LEAVE\")\r\n        iconClassName += 'leave ';\r\n      else if (typeChangeInfo === \"DIE\") {\r\n        iconClassName += 'die ';\r\n      } else {\r\n        iconClassName += 'normal-none  ';\r\n      }\r\n    } else {\r\n      if (typeChangeInfo === \"ARRIVE\") {\r\n        iconClassName += 'arrive ';\r\n      } else {\r\n        iconClassName += 'normal-display ';\r\n      }\r\n    }\r\n\r\n    let icon = playerNames[player] || 'ğŸ¶';\r\n    return (\r\n      <div\r\n        className={`chess-block ${beSelected ? 'selected' : ''} ${canBeMoveTo ? 'can-be-move-to' : ''} ${canBeSelect && !beSelected ? 'can-be-select' : ''} `}\r\n        onClick={onClick}>\r\n        <ChessComponent iconClassName={iconClassName}>{icon}</ChessComponent>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// TodoItem.propTypes = {\r\n//   onToggle: PropTypes.func.isRequired,\r\n//   onRemove: PropTypes.func.isRequired,\r\n//   completed: PropTypes.bool.isRequired,\r\n//   text: PropTypes.string.isRequired\r\n// }\r\n\r\n\r\nconst mapStateToProps = (state, {chessId, player, type}) => ({\r\n  beSelected: state.chessBoard.selected && state.chessBoard.selectId == chessId,\r\n  canBeMoveTo: judgeCanBeMoveTo(state.chessBoard, chessId),\r\n  canBeSelect: state.player.nowPlayer === player && state.player.local.indexOf(player) != -1 && type === ChessTypes.NORMAL,\r\n});\r\n\r\nexport default connect(mapStateToProps)(ChessItem);\r\nexport { getNextPosList };\r\n","import {doMoveAction, getNextPosList} from \"../boardUtils\";\r\nimport {ChessTypes} from \"../../constants\";\r\nimport {findChessPos} from \"../index\";\r\n\r\n/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\nfunction getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nconst AI = {\r\n  getTheMove: function (board, player) {\r\n    const moves = [];\r\n    for (let i = 0; i < board.length; i++) {\r\n      for (let j = 0; j < board[i].length; j++) {\r\n        if (board[i][j].type === ChessTypes.NORMAL && board[i][j].player === player) {\r\n          const moveList = getNextPosList(board, i, j);\r\n          moveList.forEach(one => {\r\n            moves.push({now: board[i][j].id, next: one}); //å­˜ç°åœ¨çš„å’Œnextçš„id\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    const theMove = moves[getRandomInt(0, moves.length - 1)];\r\n    return theMove;\r\n  },\r\n  getNextBoard: (board, player) => {\r\n    //id: 16, player: 1, type: \"æœ‰æ£‹\"\r\n    //{id: 25, player: null, type: \"æ— æ£‹\"}\r\n    console.log(\"AI getNextBoard board?!\", board, player);\r\n\r\n    // const flatBoard = flatten(board);\r\n    // const canMoveChesses = flatBoard.filter(one=>one.player===player);\r\n    const theMove = AI.getTheMove(board, player);\r\n\r\n    let newBoard = board;\r\n    if (theMove) {\r\n      const now = findChessPos(board, theMove.now);\r\n      const next = findChessPos(board, theMove.next);\r\n      console.log(\"getNextBoard theMove\", theMove, now, next);\r\n      newBoard = doMoveAction(board, now, next.x, next.y);\r\n    }\r\n\r\n    return newBoard;\r\n  }\r\n};\r\n\r\nexport default AI;\r\n","// const host = 'http://localhost:3000';\r\n// const socketPath = '/socket';\r\n\r\nimport AI from \"../ai/ai\";\r\nimport {judgeGameOver} from \"../boardUtils\";\r\n\r\nexport default class AIClient {\r\n  funcs = {\r\n    onMessage: () => {\r\n    },\r\n    onOpen: () => {\r\n    }\r\n  }\r\n  store = {\r\n    timeout: 0\r\n  }\r\n\r\n  connect(host) {\r\n    const data = {};\r\n    // this.funcs.onOpen(data);\r\n  }\r\n\r\n  disconnect() {\r\n    clearTimeout(this.store.timeout)\r\n  }\r\n\r\n  send(data) {\r\n    // this.ws.send(JSON.stringify(data));\r\n    console.log(\"AIClient send\", data);\r\n    clearTimeout(this.store.timeout);\r\n    this.store.timeout = setTimeout(() => {\r\n      const {nowPlayer, isRoundEnd} = data; // nowPlayerå¥½åƒç»å¸¸æ˜¯nullï¼Œé‚£è¾¹æ²¡å¥½å¥½ä¼ è¿‡æ¥ï¼Œå¾…ä¿®å¤\r\n\r\n      if (judgeGameOver(data.board).gameOver) return; //æ¸¸æˆå·²ç»ç»“æŸçš„è¯ï¼Œå°±ä¸ç”¨è®¡ç®—äº†\r\n\r\n      const realNowPlayer = nowPlayer === null ? 1 : nowPlayer;\r\n      const newNowPlayer = realNowPlayer ? 0 : 1;\r\n      const resData = {\r\n        board: AI.getNextBoard(data.board, realNowPlayer),\r\n        isRoundEnd: false,\r\n        needMessage: false,\r\n        nowPlayer: newNowPlayer\r\n      };\r\n      this.funcs.onMessage({data: JSON.stringify(resData)});\r\n    }, 1000);\r\n  }\r\n\r\n  setOnMessage(func) {\r\n    // this.ws.onmessage = func;\r\n    this.funcs.onMessage = func;\r\n  }\r\n\r\n  setOnOpen(func) {\r\n    // this.ws.onopen = func;\r\n    this.funcs.onOpen = func;\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.css';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\nimport {setBoard} from '../../chessBoard/actions.js';\r\nimport {reset, updateSocket} from '../actions.js';\r\nimport SocketClient, {gameMessage} from '../../utils/controlClients/SocketClient';\r\nimport {roundEnd, setLocalPlayer} from '../../player/actions';\r\nimport {moveTo} from '../../chessBoard/actions';\r\nimport {socketContainer} from '../../utils';\r\nimport {getNextPosList} from '../../chessBoard/views/chessItem';\r\nimport {ChessTypes} from '../../constants';\r\nimport AIClient from \"../../utils/controlClients/AIClient\";\r\nimport {flatten, judgeGameOver} from \"../../utils/boardUtils\";\r\n\r\nclass PlayControl extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log('PlayControlã€€constructor', props);\r\n    const {roomId, vsAI, player} = props;\r\n    this.props.setBoard();\r\n    if (props.roomId || vsAI) {\r\n      this.props.setLocalPlayer([parseInt(props.player)]);\r\n\r\n      const host = process.env.REACT_APP_WS_HOST + props.roomId;\r\n      const GameClient = vsAI ? AIClient : SocketClient;\r\n      const socketClient = new GameClient();\r\n      socketClient.connect(host);\r\n      socketClient.setOnOpen(() => {\r\n        socketClient.send(gameMessage(null, null, null, true));\r\n      });\r\n      socketClient.setOnMessage((event) => {\r\n        console.log(event, event.data, JSON.parse(event.data));\r\n        // alert(event.data);\r\n        const data = JSON.parse(event.data);\r\n        if (data.needMessage) {\r\n          const {board, nowPlayer, gameOver} = this.props;\r\n          if (!gameOver) socketClient.send(gameMessage(board, nowPlayer, false));\r\n        } else {\r\n          props.onReceiveBoard(data);\r\n        }\r\n      });\r\n      socketContainer.setSocketClient(socketClient);\r\n    } else {\r\n      this.props.setLocalPlayer([0, 1]);\r\n      if (socketContainer.getSocketClient()) {\r\n        socketContainer.getSocketClient().disconnect();\r\n        socketContainer.setSocketClient(null);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const {gameOver: preGameOver} = this.props;\r\n    const {gameOver, winners} = nextProps;\r\n    console.log('judge gameOver! ', this.props, gameOver, preGameOver);\r\n    if (gameOver && !preGameOver) {\r\n      // å»¶è¿ŸgameOverå¼¹æ¡†ï¼Œé˜²æ­¢çœ‹ä¸åˆ°æœ€åä¸€æ­¥ã€‚ä¸è¿‡æ²¡æœ‰ç«‹å³ç¦æ­¢æ“ä½œï¼Œå¯èƒ½è¦å†ä¼˜åŒ–ä¸‹\r\n      setTimeout(() => {\r\n        alert(`æ¸¸æˆç»“æŸï¼èƒœè€…æ˜¯${this.getPlayerNames()[winners]}`);\r\n        // window.location.reload();\r\n        nextProps.resetAll();\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(): void {\r\n    if (socketContainer.getSocketClient()) {\r\n      socketContainer.getSocketClient().disconnect();\r\n      socketContainer.setSocketClient(null);\r\n    }\r\n  }\r\n\r\n  getPlayerNames() {\r\n    const {params} = this.props;\r\n    let playerNames = ['ğŸ»', 'ğŸ¸'];\r\n    if (params.playerNames) {\r\n      playerNames = JSON.parse(params.playerNames);\r\n    }\r\n    return playerNames\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      ChessBoard, player, gameOver, roomId, params\r\n    } = this.props;\r\n\r\n\r\n    return (\r\n      <div className=\"full-window\">\r\n        <div className=\"inner-window\">\r\n          {roomId ? <div>æˆ¿é—´{roomId}</div> : ''}\r\n          <div><ChessBoard playerNames={this.getPlayerNames()}/></div>\r\n          <div>{player}</div>\r\n          <div>è§„åˆ™ï¼šæœ¬å›åˆç§»åŠ¨çš„å·±æ–¹æ£‹å­å’Œå…¶ç§»åŠ¨åç›¸é‚»çš„æ£‹å­ï¼Œä¸¤ä¸ªæ£‹å­ç»„æˆç‚®å°ï¼Œæ€æ­»å¤„åœ¨è¯¥ç‚®å°è¿çº¿ä¸Šç›¸é‚»çš„æ•Œæ–¹æ£‹å­ã€‚å¦‚æœè¿™æ¡ç›´çº¿ä¸Šæœ‰4ä¸ªæ£‹å­åˆ™æ€ä¸æ‰ã€‚å½“æœ‰ç©å®¶åªå‰©1é¢—æ£‹å­æˆ–è€…æ— æ³•è¡ŒåŠ¨æ—¶è¾“æ‰ã€‚</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  const board = state.chessBoard.board;\r\n\r\n  const {gameOver, winners} = judgeGameOver(board, state.player, state.player.order);\r\n  // console.log(flatBoard, gameOver);\r\n  return {\r\n    gameOver,\r\n    winners: gameOver ? winners : [],\r\n    board,\r\n    nowPlayer: state.player.nowPlayer,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setLocalPlayer: (local) => {\r\n    dispatch(setLocalPlayer(local));\r\n  },\r\n  setNowPlayer: (nowPlayer) => {\r\n    dispatch(setLocalPlayer(null, nowPlayer));\r\n  },\r\n  setBoard: (board) => {\r\n    dispatch(setBoard(board));\r\n  },\r\n  resetAll: () => {\r\n    dispatch(setBoard());\r\n  },\r\n  onReceiveBoard: (data) => {\r\n    const {board, nowPlayer, isRoundEnd} = data;\r\n    console.log('will dispatch, board=', board, nowPlayer, isRoundEnd);\r\n    dispatch(setBoard(board));\r\n    if (nowPlayer || nowPlayer === 0) dispatch(setLocalPlayer(null, nowPlayer));\r\n    if (isRoundEnd) dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayControl);\r\n","import React, {Component} from 'react';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\n\r\nimport \"./menuPage.scss\";\r\nimport Button from '@material-ui/core/Button';\r\nimport qs from \"qs\";\r\n\r\nconst buttonList = [\r\n  {title: 'å•æŒ‘AI', url: '/local-ai/1/0'},\r\n  {title: 'æœ¬åœ°åŒäºº', url: '/local'},\r\n  // {title: 'åœ¨çº¿åŒäºº-å—ä½', url: '/online/123/0'},\r\n  // {title: 'åœ¨çº¿åŒäºº-åŒ—ä½', url: '/online/123/1'},\r\n  {\r\n    title: 'ç½‘ç»œå¯¹æˆ˜', urlFunc: () => {\r\n      const randomNumber = Math.floor(Math.random() * 1000000 + 1);\r\n      return `/room/${randomNumber}`\r\n    }\r\n  },\r\n];\r\n\r\nconst menuPage = (props) => {\r\n  const urlParams = props.location.search;\r\n  const params = qs.parse(urlParams, {ignoreQueryPrefix: true});\r\n  let gameNameDisplay = 'ç†Šè›™æ£‹';\r\n  if (params.playerNames) {\r\n    gameNameDisplay = '';\r\n    const names = JSON.parse(params.playerNames);\r\n    console.log(\"gameNameDisplay\", qs.stringify({playerNames: params.playerNames}));\r\n    names.forEach(one=>gameNameDisplay+=one);\r\n    gameNameDisplay += 'æ£‹';\r\n  }\r\n  return (<div className=\"menu-page\">\r\n    <div className={\"title-field\"}>\r\n      <div className=\"page-title\">\r\n        {gameNameDisplay}\r\n      </div>\r\n    </div>\r\n    <div className=\"right-field\">\r\n      <div className=\"page-select-list\">\r\n        {buttonList.map(buttonData => {\r\n          const {title, url, urlFunc} = buttonData;\r\n          return <div key={title}>\r\n            <Button\r\n              raised=\"raised\" className=\"mdc-button my-button\" onClick={() => {\r\n              if (urlFunc) props.history.push(`${urlFunc()}${urlParams}`);\r\n              else props.history.push(`${url}${urlParams}`);\r\n            }}>\r\n              {title}\r\n            </Button></div>\r\n        })}\r\n      </div>\r\n    </div>\r\n    {/* <div><Link to=\"/\">ä¸»èœå•</Link></div> */}\r\n  </div>);\r\n}\r\n\r\nexport default menuPage;\r\n","import React, {Component} from 'react';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\n\r\nimport \"./RoomMenu.scss\";\r\nimport Button from '@material-ui/core/Button';\r\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\r\nimport * as qs from \"qs\";\r\n\r\nconst buttonList = [\r\n  {title: 'ç©å®¶1è¿›å…¥', urlFunc: (roomId, playerId) => `/online/${roomId}/${playerId}`},\r\n  {title: 'ç©å®¶2è¿›å…¥', urlFunc: (roomId, playerId) => `/online/${roomId}/${playerId}`},\r\n];\r\n\r\nconst OnePlayerPanel = (props) => {\r\n  const {playerName, url} = props;\r\n  return <div className='one-player-panel'>\r\n    <div>{playerName}</div>\r\n    <div>\r\n      <input className='my-input' value={url} readOnly={true}/>\r\n      <CopyToClipboard text={url}\r\n                       onCopy={() => {\r\n                       }}>\r\n        <button className='copy-button' onClick={() => {\r\n        }}>å¤åˆ¶ç½‘å€\r\n        </button>\r\n      </CopyToClipboard>\r\n    </div>\r\n    <Button\r\n      raised=\"raised\" className=\"enter-button\" onClick={() => {\r\n      props.onJump && props.onJump();\r\n    }}>{`è¿›å…¥${playerName}åº§ä½`}</Button>\r\n  </div>\r\n};\r\n\r\nconst RoomMenu = (props) => {\r\n  const {history, roomId, params={}} = props;\r\n  const {host, href, pathname} = window.location;\r\n  console.log(\"location!\", props.location, window.location);\r\n  const urlPrefix = href.split('#')[0];\r\n  const paramsString = props.location.search;\r\n  return (<div className=\"menu-page\">\r\n    <div className={\"title-field\"}>\r\n      <div className=\"page-info\">\r\n        ç½‘ç»œ1V1å¯¹æˆ˜ï¼šæŠŠä¸€ä¸ªåº§ä½çš„ç½‘å€å‘ç»™æœ‹å‹ï¼Œè‡ªå·±è¿›å…¥å¦ä¸€ä¸ªåº§ä½ç½‘å€ã€‚\r\n      </div>\r\n      <div><Button outlined=\"outlined\" className=\"back-button\" onClick={() => {\r\n        props.history.push(`/${paramsString}`);\r\n      }}>è¿”å›ä¸»èœå•</Button></div>\r\n    </div>\r\n    <div className=\"right-field\">\r\n      <div className=\"player-copy-field\">\r\n        <OnePlayerPanel playerName={\"ç©å®¶1\"} url={`${urlPrefix}#/online/${roomId}/${0}${paramsString}`} onJump={() => {\r\n          props.history.push(`/online/${roomId}/${0}${paramsString}`);\r\n        }}/>\r\n        <OnePlayerPanel playerName={\"ç©å®¶2\"} url={`${urlPrefix}#/online/${roomId}/${1}${paramsString}`} onJump={() => {\r\n          props.history.push(`/online/${roomId}/${1}${paramsString}`);\r\n        }}/>\r\n      </div>\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default RoomMenu;\r\n","/**\r\n * Created by yuiff on 2018/4/1.\r\n */\r\nimport React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.css';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\nimport PlayControl from './gamePlaying.js';\r\nimport menuPage from \"../../menu/menuPage\";\r\nimport RoomMenu from \"../../menu/RoomMenu\";\r\nimport qs from \"qs\";\r\n\r\nclass RouteControl extends Component {\r\n  render() {\r\n    const {chessBoard, player, gameOver} = this.props;\r\n    const playControl = ({match, location, ...others}) => {\r\n      console.log(\"playControl\", match, others, this.props);\r\n      const params = qs.parse(location.search, { ignoreQueryPrefix: true });\r\n      return <PlayControl {...this.props} roomId={match.params.roomId}\r\n                   player={match.params.playerId} vsAI={match.params.hasAI} params={params}/>;\r\n    }\r\n    const roomControl = (props) => {\r\n      const {match} = props;\r\n      return <RoomMenu {...props} roomId={match.params.roomId} />\r\n    };\r\n    return (\r\n      <div className=\"full-window\">\r\n        <div className=\"inner-window\">\r\n          <Switch>\r\n            <Route path=\"/local\" component={playControl}/>\r\n            <Route path=\"/local-ai/:hasAI/:playerId\" component={playControl} />\r\n            <Route path=\"/online/:roomId/:playerId\" component={playControl}/>\r\n            <Route exact path=\"/\" component={menuPage}/>\r\n            <Route path=\"/room/:roomId\" component={roomControl}/>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\n\r\nexport default connect(mapStateToProps)(RouteControl);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { select, moveTo } from '../actions.js';\r\nimport { roundEnd } from '../../player/actions';\r\nimport ChessItem from './chessItem.js';\r\n\r\nimport './style.scss';\r\n\r\nconst ChessBoard = ({ board, onSelect, onMoveTo, playerNames }) => {\r\n  let rowKey = 0;\r\n\r\n  return (\r\n    <div className=\"chess-board\">\r\n      {\r\n                board.map(row => (\r\n                  <div className=\"row\" key={rowKey++}>\r\n                    {row.map((item, index) => (\r\n                      <ChessItem\r\n                        key={index}\r\n                        chessId={item.id}\r\n                        player={item.player}\r\n                        playerNames={playerNames}\r\n                        type={item.type}\r\n                        onSelect={() => onSelect(item.id)}\r\n                        onMoveTo={() => onMoveTo(item.id)}\r\n                      />\r\n                        ))}\r\n                  </div>\r\n                ))\r\n            }\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  board: state.chessBoard.board,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onSelect: (id) => {\r\n    dispatch(select(id));\r\n  },\r\n  onMoveTo: (id) => {\r\n    dispatch(moveTo(id));\r\n    dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChessBoard);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { playCard } from '../actions.js';\r\n\r\nconst CardItem = ({\r\n  type, active, isShow, onRemove,\r\n}) => {\r\n  let typeShow = '';\r\n  switch (type) {\r\n    case 0:\r\n      typeShow = 'çŸ³å¤´';\r\n      break;\r\n    case 1:\r\n      typeShow = 'å‰ªåˆ€';\r\n      break;\r\n    case 2:\r\n      typeShow = 'å¸ƒ';\r\n      break;\r\n  }\r\n  return (\r\n    <div\r\n      className=\"card\"\r\n      onClick={active ? onRemove : null}\r\n      style={{\r\n                 backgroundColor: active ? 'yellow' : 'white',\r\n             }}\r\n    >\r\n      {active || isShow ? typeShow : ''}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nCardItem.propTypes = {\r\n  type: PropTypes.string.isRequired,\r\n  active: PropTypes.bool.isRequired,\r\n  isShow: PropTypes.bool,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  active: state.game.nowPlayer === ownProps.player && state.game.players[ownProps.player].cardPlayed.length === 0,\r\n});\r\n\r\n\r\nexport default connect(mapStateToProps)(CardItem);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { setLocalPlayer } from '../actions.js';\r\nimport CardItem from './cardItem.js';\r\n\r\nclass PlayerZone extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.render = this.render.bind(this);\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidUpdate(preProps) {\r\n    const isNowPlayer = this.props.isNowPlayer;\r\n    const onRemoveCard = this.props.onRemoveCard;\r\n    const isComputer = this.props.isComputer;\r\n    const player = this.props.player;\r\n    const cards = this.props.cards;\r\n    const nowPlayer = this.props.nowPlayer;\r\n    const life = this.props.life;\r\n    console.log('AI', isNowPlayer, isComputer, player, nowPlayer);\r\n    if (isNowPlayer && isComputer && life > 0) {\r\n      const length = cards.length;\r\n      const selectCardIndex = Math.floor(Math.random() * length);\r\n      const selectCardId = cards[selectCardIndex].id;\r\n      onRemoveCard(selectCardId, player);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // const cards = this.props.cards;\r\n    const player = this.props.player;\r\n    const life = this.props.life;\r\n    const onRemoveCard = this.props.onRemoveCard;\r\n    const noCard = this.props.noCard;\r\n    const isComputer = this.props.isComputer;\r\n    if (noCard && !isComputer) {\r\n      let str = `å‡ºå®Œäº†ï¼ä½ è¿˜å‰©${life}æ˜Ÿæ˜Ÿï¼Œ`;\r\n      if (life === 3) str += 'èƒ½å¤Ÿå…¨èº«è€Œé€€ï¼Œæ— æ•Œã€‚';\r\n      else if (life < 3) str += 'ä¸è¶³3é¢—ï¼Œå®Œè›‹äº†ã€‚';\r\n      else str += 'èµšåˆ°ã€‚';\r\n      alert(str);\r\n      if (life >= 3) window.location.href = 'http://www.daifish.top/hebi.html';\r\n      else window.location.href = 'http://www.daifish.top/mario.html';\r\n    }\r\n    return (\r\n      <div className=\"playerZone\">\r\n        {\r\n                    life <= 0 ?\r\n                      <div className=\"dead\">\r\n                            æ­»äº†ã€‚\r\n                      </div>\r\n                        :\r\n                        // life!==0\r\n                      <div>\r\n                        {player}\r\n                        {/* <div className=\"cardZone\"> */}\r\n                        {/* { */}\r\n                        {/* cards.map((item) => ( */}\r\n                        {/* <CardItem */}\r\n                        {/* key={item.id} */}\r\n                        {/* type={item.type} */}\r\n                        {/* player={player} */}\r\n                        {/* onRemove={() => onRemoveCard(item.id, player)} */}\r\n                        {/* /> */}\r\n                        {/* )) */}\r\n                        {/* } */}\r\n                        {/* </div> */}\r\n                        <div className=\"lifeZone\">\r\n                          {\r\n                                    Array.from(Array(life), () => 'â˜…').map(item => (\r\n                                      <span>{item}</span>\r\n                                    ))\r\n                                }\r\n                        </div>\r\n                      </div>\r\n                }\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPlayerZone.propTypes = {\r\n  cards: PropTypes.array.isRequired,\r\n  life: PropTypes.number.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  cards: state.player.players[ownProps.player].cards,\r\n  life: state.player.players[ownProps.player].life,\r\n  noCard: false,\r\n  isComputer: state.player.players[ownProps.player].isComputer,\r\n  isNowPlayer: state.player.nowPlayer === ownProps.player,\r\n  nowPlayer: state.player.nowPlayer,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onRemoveCard: (id, player) => {\r\n    dispatch(setLocalPlayer(id, player));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayerZone);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n// import {bindActionCreators} from 'redux';\r\nimport CardItem from './cardItem.js';\r\nimport { playCard, showHand, roundEnd } from '../actions.js';\r\n// import {FilterTypes} from '../../constants.js';\r\n\r\nconst PublicZone = ({ nowPlayerName, roundEnd }) => (\r\n  <div className=\"\" onClick={roundEnd}>\r\n            ç°åœ¨è½®åˆ°{nowPlayerName}è¡ŒåŠ¨\r\n  </div>\r\n);\r\n\r\nconst mapStateToProps = state => ({\r\n  nowPlayerName: state.player.players[state.player.nowPlayer].name,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  roundEnd: () => {\r\n    dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicZone);\r\n\r\n","import React from 'react';\r\nimport PlayerZone from './playerZone.js';\r\nimport PublicZone from './publicZone.js';\r\n\r\nimport './style.css';\r\n\r\nexport default () => (\r\n  <div className=\"\">\r\n    <PublicZone />\r\n  </div>\r\n);\r\n\r\n","import React from 'react';\r\nimport { view as GameControl } from './gameControl/';\r\nimport { view as ChessBoard } from './chessBoard/';\r\nimport { view as Player } from './player/';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\n\r\nfunction App() {\r\n  const chessBoard = ChessBoard;\r\n  const player = <Player />;\r\n  return (\r\n    <GameControl ChessBoard={chessBoard} player={player} />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\n\r\nimport { reducer as playerReducer } from './player';\r\nimport { reducer as chessBoardReducer } from './chessBoard';\r\nimport { reducer as gameControlReducer } from './gameControl';\r\nimport { getInitState } from './utils/';\r\n\r\nconst win = window;\r\n\r\nconst reducer = combineReducers({\r\n  player: playerReducer,\r\n  chessBoard: chessBoardReducer,\r\n  gameControl: gameControlReducer,\r\n});\r\n\r\n\r\nconst middlewares = [];\r\nif (process.env.NODE_ENV !== 'production') {\r\n  middlewares.push(require('redux-immutable-state-invariant').default());\r\n}\r\n\r\nconst storeEnhancers = compose(\r\n  applyMiddleware(...middlewares),\r\n  (win && win.devToolsExtension) ? win.devToolsExtension() : f => f,\r\n);\r\n\r\nexport default createStore(reducer, getInitState(), storeEnhancers);\r\n","import { SET_LOCAL_PLAYER, ROUND_END } from './actionTypes.js';\r\n\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case ROUND_END: {\r\n      const newState = {\r\n        ...state,\r\n        nowPlayer: state.order[(state.order.indexOf(state.nowPlayer) + 1) % state.order.length],\r\n      };\r\n      return newState;\r\n    }\r\n    case SET_LOCAL_PLAYER: {\r\n      const nextState = {\r\n        ...state,\r\n        nowPlayer: action.nowPlayer ? action.nowPlayer : 0,\r\n      };\r\n      if (action.local) { nextState.local = action.local; }\r\n      return nextState;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {SELECT, MOVE_TO, SET_BOARD} from './actionTypes.js';\r\nimport {findChessPos, socketContainer} from '../utils';\r\nimport {ChessTypes} from '../constants.js';\r\nimport {createBearFrogBoard} from '../utils/';\r\nimport {gameMessage} from '../utils/controlClients/SocketClient';\r\nimport {doMoveAction} from \"../utils/boardUtils\";\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case SELECT: {\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        selected: true,\r\n        selectId: action.id,\r\n      };\r\n    }\r\n    case MOVE_TO: {\r\n      const now = findChessPos(state.board, state.selectId);\r\n      const {x, y} = findChessPos(state.board, action.id);\r\n      const board = state.board;\r\n      console.log(now.x, now.y, x, y, state.selectId, action.id, state.board);\r\n      const newBoard = doMoveAction(board, now, x, y);\r\n      if (socketContainer.getSocketClient()) {\r\n        socketContainer.getSocketClient()\r\n          .send(gameMessage(newBoard, null, true));\r\n      }\r\n      return {\r\n        ...state,\r\n        board: newBoard,\r\n        selected: false,\r\n      };\r\n    }\r\n    case SELECT: {\r\n      return state.filter(todoItem => todoItem.id !== action.id);\r\n    }\r\n    case SET_BOARD: {\r\n      console.log('SET_BOARD!REDUCER, got action:', action);\r\n      let newBoard = action.board;\r\n      if(!newBoard){\r\n        newBoard = createBearFrogBoard();\r\n        // å¦‚æœæ‰“AIçš„è¯ï¼Œè¦è¿™æ ·å‘æ–°çš„æ£‹ç›˜ç»™AIè®©å®ƒåŠ¨ä¸€ä¸‹ï¼Œå¦åˆ™ä¼šä¸¤è¾¹éƒ½æ²¡æ³•åŠ¨ã€‚è¿™ä¸ªä¸´æ—¶åœ¨è¿™åŠ ç€ï¼Œåº”è¯¥æœ‰æ›´å¥½çš„å®ç°æ–¹å¼ã€‚\r\n        if (socketContainer.getSocketClient()) {\r\n          socketContainer.getSocketClient()\r\n            .send(gameMessage(newBoard, null, true));\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        board: newBoard,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport { HashRouter as BrowserRouter } from 'react-router-dom';\r\n\r\nimport store from './Store.js';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}