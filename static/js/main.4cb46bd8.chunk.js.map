{"version":3,"sources":["gameControl/actionTypes.js","constants.js","utils/index.js","gameControl/reducer.js","chessBoard/actionTypes.js","chessBoard/actions.js","utils/controlClients/SocketClient.js","player/actions.js","player/actionTypes.js","utils/boardUtils.js","chessBoard/views/chessItem.js","utils/ai/ai.js","utils/controlClients/AIClient.js","gameControl/views/gamePlaying.js","menu/menuPage.js","menu/RoomMenu.js","gameControl/views/routeControl.js","chessBoard/reducer.js","chessBoard/views/chessBoard.js","player/reducer.js","player/views/playerZone.js","player/views/cardItem.js","player/views/publicZone.js","player/views/gameBoard.js","App.js","Store.js","index.js"],"names":["RESET","UPDATE_SOCKET","ChessTypes","NONE","NORMAL","findChessPos","board","chessId","selectPos","i","length","row","j","id","x","y","createChess","player","chessType","type","createBearFrogBoard","getInitState","players","name","order","local","nowPlayer","chessBoard","selected","selectId","gameControl","socketContainer","this","socketClient","setSocketClient","bind","getSocketClient","s","SELECT","MOVE_TO","SET_BOARD","setBoard","SocketAPI","host","ws","WebSocket","onclose","e","alert","onerror","disconnect","data","send","JSON","stringify","func","onmessage","onopen","gameMessage","isRoundEnd","needMessage","setLocalPlayer","getNextPosList","maxX","maxY","gx","gy","moveList","x2","y2","push","judgeCanBeMoveTo","indexOf","doMoveAction","now","newBoard","map","item","temp","typeChangeInfo","reason","isHorizon","ii","allLength","maxAllLength","selfLength","maxSelfLength","selfSize","enemyList","jj","Math","max","doKill","ChessItem","props","context","state","nextProps","beSelected","canBeMoveTo","onSelect","onMoveTo","canBeSelect","iconClassName","icon","className","onClick","React","Component","connect","AI","getTheMove","moves","forEach","one","next","min","ceil","floor","random","getNextBoard","console","log","theMove","AIClient","funcs","onMessage","onOpen","setTimeout","resData","PlayControl","roomId","vsAI","parseInt","process","SocketClient","setOnOpen","setOnMessage","event","parse","gameOver","onReceiveBoard","preGameOver","winners","resetAll","flatBoard","flatten","arr","reduce","pre","val","concat","Array","isArray","playerChessCount","key","playerCanMoveCount","overs","Object","keys","judgeGameOver","dispatch","setNowPlayer","buttonList","title","url","urlFunc","randomNumber","menuPage","buttonData","Button","raised","history","OnePlayerPanel","playerName","value","readOnly","text","onCopy","onJump","RoomMenu","location","window","outlined","RouteControl","playControl","match","params","playerId","hasAI","Switch","Route","path","component","exact","select","moveTo","rowKey","index","PlayerZone","ownProps","active","game","cardPlayed","isShow","onRemove","typeShow","style","backgroundColor","render","preProps","isNowPlayer","onRemoveCard","isComputer","cards","life","noCard","str","href","from","nowPlayerName","roundEnd","App","win","reducer","combineReducers","action","newState","nextState","filter","todoItem","storeEnhancers","compose","applyMiddleware","devToolsExtension","f","createStore","ReactDOM","store","document","getElementById"],"mappings":"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","file":"static/js/main.4cb46bd8.chunk.js","sourcesContent":["export const RESET = 'GAME_CONTROL/RESET';\r\nexport const UPDATE_SOCKET = 'GAME_CONTROL/UPDATE_SOCKET';\r\n","export const ChessTypes = {\r\n  NONE: '无棋',\r\n  NORMAL: '有棋',\r\n};\r\n","/**\r\n * Created by yuiff on 2018/3/31.\r\n */\r\nimport { ChessTypes } from '../constants.js';\r\n\r\nconst findChessPos = (board, chessId) => {\r\n  let selectPos = {};\r\n  for (let i = 0; i < board.length; i++) {\r\n    const row = board[i];\r\n    for (let j = 0; j < row.length; j++) {\r\n      // console.log(typeof(i), typeof(j));\r\n      const item = row[j];\r\n      if (item.id === chessId) {\r\n        selectPos = {\r\n          x: i,\r\n          y: j,\r\n        };\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  // console.log(selectPos, chessId, board, typeof(selectPos.x), typeof(selectPos.y));\r\n  return selectPos;\r\n};\r\n\r\nlet chessId = 0;\r\nconst createChess = (player, chessType) => ({\r\n  id: chessId++,\r\n  player,\r\n  type: chessType,\r\n});\r\n\r\nconst createBearFrogBoard = () => {\r\n  const board = [\r\n    [createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL), createChess(1, ChessTypes.NORMAL)],\r\n    [createChess(1, ChessTypes.NORMAL), createChess(null, ChessTypes.NONE), createChess(null, ChessTypes.NONE), createChess(1, ChessTypes.NORMAL)],\r\n    [createChess(0, ChessTypes.NORMAL), createChess(null, ChessTypes.NONE), createChess(null, ChessTypes.NONE), createChess(0, ChessTypes.NORMAL)],\r\n    [createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL), createChess(0, ChessTypes.NORMAL)],\r\n  ];\r\n  return board;\r\n};\r\n\r\nconst getInitState = () => {\r\n  const initValues = {\r\n    player: {\r\n      players: [\r\n        {\r\n          name: '黑方',\r\n        },\r\n        {\r\n          name: '红方',\r\n        },\r\n      ],\r\n      order: [0, 1],\r\n      local: [0, 1],\r\n      nowPlayer: 0,\r\n    },\r\n    chessBoard: {\r\n      board: createBearFrogBoard(),\r\n      selected: false,\r\n      selectId: -1,\r\n    },\r\n    gameControl: {\r\n    },\r\n  };\r\n  return initValues;\r\n};\r\n\r\nclass SocketContainerClass{\r\n  constructor(){\r\n    this.socketClient = null;\r\n    this.setSocketClient = this.setSocketClient.bind(this);\r\n    this.getSocketClient = this.getSocketClient.bind(this);\r\n  }\r\n  setSocketClient(s) {\r\n    this.socketClient = s;\r\n  }\r\n  getSocketClient () {return this.socketClient}\r\n}\r\n\r\nconst socketContainer = new SocketContainerClass();\r\n\r\nexport { findChessPos, createBearFrogBoard, getInitState, socketContainer };\r\n","import { RESET, UPDATE_SOCKET } from './actionTypes.js';\r\nimport { ChessTypes } from '../constants.js';\r\nimport { getInitState } from '../utils/';\r\n\r\nexport default (state = ChessTypes.NONE, action) => {\r\n  switch (action.type) {\r\n    case RESET: {\r\n      //好像写的不对，也没用上\r\n      console.log('RESET!', getInitState());\r\n      return getInitState();\r\n    }\r\n    case UPDATE_SOCKET: {\r\n      //这个好像，也没用上，这个东西都不放在store里了\r\n      console.log('UPDATE_SOCKET!', action.socketClient);\r\n      const { socketClient } = action;\r\n      return {\r\n        ...state,\r\n        socketClient,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const SELECT = 'CHESS_BOARD/SELECT';\r\nexport const MOVE_TO = 'CHESS_BOARD/MOVE_TO';\r\nexport const SET_BOARD = 'CHESS_BOARD/SET_BOARD';\r\n","import { SELECT, MOVE_TO, SET_BOARD } from './actionTypes.js';\r\n\r\nexport const select = id => ({\r\n  type: SELECT,\r\n  id,\r\n});\r\n\r\nexport const moveTo = id => ({\r\n  type: MOVE_TO,\r\n  id,\r\n});\r\n\r\nexport const setBoard = board => ({\r\n  type: SET_BOARD,\r\n  board,\r\n});\r\n","// const host = 'http://localhost:3000';\n// const socketPath = '/socket';\n\nexport default class SocketAPI {\n  ws;\n\n  connect(host) {\n    this.ws = new WebSocket(host);\n    this.ws.onclose = (e) => {\n      alert('webSocket onClose!' + e);\n    };\n    this.ws.onerror = (e) => {\n      alert('webSocket onError!' + e);\n    };\n  }\n\n  disconnect() {\n    this.ws.disconnect();//待确认，乱写的\n  }\n\n  send(data) {\n    this.ws.send(JSON.stringify(data));\n  }\n\n  setOnMessage(func) {\n    this.ws.onmessage = func;\n  }\n\n  setOnOpen(func) {\n    this.ws.onopen = func;\n  }\n\n  // on(event, fun) {\n  //     // No promise is needed here, but we're expecting one in the middleware.\n  //     return new Promise((resolve, reject) => {\n  //         if (!this.socket) return reject('No socket connection.');\n  //\n  //         this.socket.on(event, fun);\n  //         resolve();\n  //     });\n  // }\n}\n\nconst gameMessage = (board, nowPlayer, isRoundEnd = false, needMessage = false) => {\n  return {\n    board,\n    nowPlayer,\n    isRoundEnd,\n    needMessage\n  };\n};\n\nexport { gameMessage };\n","import { SET_LOCAL_PLAYER, ROUND_END } from './actionTypes.js';\r\n\r\nexport const setLocalPlayer = (local, nowPlayer) => ({\r\n  type: SET_LOCAL_PLAYER,\r\n  local,\r\n  nowPlayer,\r\n});\r\n\r\nexport const roundEnd = () => ({\r\n  type: ROUND_END,\r\n});\r\n","export const SET_LOCAL_PLAYER = 'PLAYER/PLAY';\r\nexport const ROUND_END = 'PLAYER/ROUND_END';\r\n","import {ChessTypes} from \"../constants\";\r\nimport {findChessPos} from \"./index\";\r\n\r\nexport function getNextPosList(board, x, y) {\r\n  const maxX = board.length;\r\n  const maxY = board[0].length;\r\n  const gx = [0, 0, -1, 1];\r\n  const gy = [1, -1, 0, 0];\r\n  const moveList = [];\r\n  for (const i in gx) {\r\n    const x2 = x + gx[i];\r\n    const y2 = y + gy[i];\r\n    // console.log(x, y, gx[i], gy[i], x2, y2, maxX, maxY, typeof(x), typeof(gx[i]));\r\n    if (x2 >= 0 && x2 < maxX && y2 >= 0 && y2 < maxY && board[x2][y2].type === ChessTypes.NONE) {\r\n      moveList.push(board[x2][y2].id);\r\n    }\r\n  }\r\n  return moveList;\r\n}\r\n\r\n\r\nexport const judgeCanBeMoveTo = ({board, selectId, selected}, chessId) => {\r\n  if (!selected) return false;\r\n  const {x, y} = findChessPos(board, selectId);\r\n  const moveList = getNextPosList(board, x, y);\r\n  // console.log(moveList.indexOf(chessId) !== -1);\r\n  return moveList.indexOf(chessId) !== -1;\r\n};\r\n\r\nexport function doKill(board, x, y, player) {\r\n  for (let isHorizon = 0; isHorizon < 2; isHorizon++) {\r\n    let maxX = board.length;\r\n    let maxY = board[0].length;\r\n    if (isHorizon) [maxX, maxY] = [maxY, maxX];\r\n    const ii = isHorizon ? x : y;\r\n\r\n    let allLength = 0,\r\n      maxAllLength = 0;\r\n    let selfLength = 0,\r\n      maxSelfLength = 0,\r\n      selfSize = 0;\r\n    const enemyList = [];\r\n    for (let jj = 0; jj < maxY; jj++) {\r\n      const [i, j] = isHorizon ? [ii, jj] : [jj, ii];\r\n      const now = board[i][j];\r\n      if (now.type != ChessTypes.NONE) {\r\n        allLength++;\r\n        maxAllLength = Math.max(allLength, maxAllLength);\r\n        if (now.player === player) {\r\n          selfLength++;\r\n          maxSelfLength = Math.max(selfLength, maxSelfLength);\r\n          selfSize++;\r\n        } else {\r\n          enemyList.push(now);\r\n          selfLength = 0;\r\n        }\r\n      } else {\r\n        allLength = 0;\r\n        selfLength = 0;\r\n      }\r\n    }\r\n    if (maxAllLength == 3 && maxSelfLength == 2 && selfSize == 2 && enemyList.length == 1) {\r\n      for (let j = 0; j < enemyList.length; j++) {\r\n        enemyList[j].type = ChessTypes.NONE;\r\n        enemyList[j].typeChangeInfo = {reason: \"DIE\"};\r\n        enemyList[j].player = -1;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 从now: {x,y}移动一个棋到x,y，计算kill操作\r\nexport function doMoveAction(board, now, x, y) {\r\n  const newBoard = board.map(row =>\r\n    row.map(item => ({...item})));\r\n  // (now.x,now.y) move to x,y\r\n  const temp = newBoard[now.x][now.y];\r\n  newBoard[now.x][now.y] = newBoard[x][y];\r\n  newBoard[x][y] = temp;\r\n\r\n  newBoard[now.x][now.y].typeChangeInfo = {reason: \"LEAVE\", x, y};\r\n  newBoard[x][y].typeChangeInfo = {reason: \"ARRIVE\", x: now.x, y: now.y};\r\n\r\n  const player = newBoard[x][y].player;\r\n  doKill(newBoard, x, y, player);\r\n  return newBoard;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport MdAccessibility from 'react-icons/lib/md/accessibility';\r\nimport MdAccessible from 'react-icons/lib/md/accessible';\r\nimport MdPets from 'react-icons/lib/md/pets';\r\nimport * as FontAwesome from 'react-icons/lib/fa'\r\nimport {ChessTypes} from '../../constants.js';\r\nimport {findChessPos} from '../../utils';\r\nimport {judgeCanBeMoveTo, getNextPosList} from \"../../utils/boardUtils\";\r\n\r\nclass ChessItem extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {}\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n  }\r\n\r\n  render() {\r\n    const {player, type, beSelected, canBeMoveTo, onSelect, onMoveTo, canBeSelect, typeChangeInfo} = this.props;\r\n    const onClick = () => {\r\n      if (canBeMoveTo) {\r\n        onMoveTo();\r\n      } else if (type != ChessTypes.NONE && canBeSelect) {\r\n        onSelect();\r\n      }\r\n    };\r\n    let iconClassName = `chess-item ${player == 1 ? 'enemy' : ''} `;\r\n    if (type === ChessTypes.NONE) {\r\n      if (typeChangeInfo === \"LEAVE\")\r\n        iconClassName += 'leave ';\r\n      else if (typeChangeInfo === \"DIE\") {\r\n        iconClassName += 'die ';\r\n      } else {\r\n        iconClassName += 'normal-none  ';\r\n      }\r\n    } else {\r\n      if (typeChangeInfo === \"ARRIVE\") {\r\n        iconClassName += 'arrive ';\r\n      } else {\r\n        iconClassName += 'normal-display ';\r\n      }\r\n    }\r\n\r\n    let icon = null;\r\n    if (player == 0)\r\n      icon = <MdAccessibility className={iconClassName}/>\r\n    else\r\n      icon = <MdAccessibility className={iconClassName}/>;\r\n    return (\r\n      <div\r\n        className={`chess-block ${beSelected ? 'selected' : ''} ${canBeMoveTo ? 'can-be-move-to' : ''} ${canBeSelect && !beSelected ? 'can-be-select' : ''} `}\r\n        onClick={onClick}>\r\n        {icon}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// TodoItem.propTypes = {\r\n//   onToggle: PropTypes.func.isRequired,\r\n//   onRemove: PropTypes.func.isRequired,\r\n//   completed: PropTypes.bool.isRequired,\r\n//   text: PropTypes.string.isRequired\r\n// }\r\n\r\n\r\nconst mapStateToProps = (state, {chessId, player}) => ({\r\n  beSelected: state.chessBoard.selected && state.chessBoard.selectId == chessId,\r\n  canBeMoveTo: judgeCanBeMoveTo(state.chessBoard, chessId),\r\n  canBeSelect: state.player.nowPlayer === player && state.player.local.indexOf(player) != -1,\r\n});\r\n\r\nexport default connect(mapStateToProps)(ChessItem);\r\nexport { getNextPosList };\r\n","import {doMoveAction, getNextPosList} from \"../boardUtils\";\r\nimport {ChessTypes} from \"../../constants\";\r\nimport {findChessPos} from \"../index\";\r\n\r\nconst flatten = arr => arr.reduce((pre, val) => pre.concat(Array.isArray(val) ? flatten(val) : val), []);\r\n\r\n/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\nfunction getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nconst AI = {\r\n  getTheMove: function (board, player) {\r\n    const moves = [];\r\n    for (let i = 0; i < board.length; i++) {\r\n      for (let j = 0; j < board[i].length; j++) {\r\n        if (board[i][j].type === ChessTypes.NORMAL && board[i][j].player === player) {\r\n          const moveList = getNextPosList(board, i, j);\r\n          moveList.forEach(one => {\r\n            moves.push({now: board[i][j].id, next: one}); //存现在的和next的id\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    const theMove = moves[getRandomInt(0, moves.length - 1)];\r\n    return theMove;\r\n  },\r\n  getNextBoard: (board, player) => {\r\n    //id: 16, player: 1, type: \"有棋\"\r\n    //{id: 25, player: null, type: \"无棋\"}\r\n    console.log(\"AI getNextBoard board?!\", board, player);\r\n\r\n    // const flatBoard = flatten(board);\r\n    // const canMoveChesses = flatBoard.filter(one=>one.player===player);\r\n    const theMove = AI.getTheMove(board, player);\r\n\r\n    let newBoard = board;\r\n    if(theMove){\r\n      const now = findChessPos(board, theMove.now);\r\n      const next = findChessPos(board, theMove.next);\r\n      console.log(\"getNextBoard theMove\", theMove, now, next);\r\n      newBoard = doMoveAction(board, now, next.x, next.y);\r\n    }\r\n\r\n    return newBoard;\r\n  }\r\n};\r\n\r\nexport default AI;\r\n","// const host = 'http://localhost:3000';\n// const socketPath = '/socket';\n\nimport AI from \"../ai/ai\";\n\nexport default class AIClient {\n  funcs={\n    onMessage: ()=>{},\n    onOpen: ()=>{}\n  }\n  connect(host) {\n    const data = {};\n    // this.funcs.onOpen(data);\n  }\n\n  disconnect() {\n\n  }\n\n  send(data) {\n    // this.ws.send(JSON.stringify(data));\n    console.log(\"AIClient send\", data);\n    setTimeout(()=>{\n      const {nowPlayer} = data; // 好像经常是null，那边没好好传过来，待修复\n      const realNowPlayer = 1;\n      const newNowPlayer = 0;\n      const resData = {\n        board: AI.getNextBoard(data.board, 1),\n        isRoundEnd: false,\n        needMessage: false,\n        nowPlayer: newNowPlayer\n      };\n      this.funcs.onMessage({data: JSON.stringify(resData)});\n    }, 1000);\n  }\n\n  setOnMessage(func) {\n    // this.ws.onmessage = func;\n    this.funcs.onMessage = func;\n  }\n\n  setOnOpen(func) {\n    // this.ws.onopen = func;\n    this.funcs.onOpen = func;\n  }\n}\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.css';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\nimport {setBoard} from '../../chessBoard/actions.js';\r\nimport {reset, updateSocket} from '../actions.js';\r\nimport SocketClient, {gameMessage} from '../../utils/controlClients/SocketClient';\r\nimport {roundEnd, setLocalPlayer} from '../../player/actions';\r\nimport {moveTo} from '../../chessBoard/actions';\r\nimport {socketContainer} from '../../utils';\r\nimport {getNextPosList} from '../../chessBoard/views/chessItem';\r\nimport {ChessTypes} from '../../constants';\r\nimport AIClient from \"../../utils/controlClients/AIClient\";\r\n\r\nclass PlayControl extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log('PlayControl　constructor', props);\r\n    const {roomId, vsAI, player} = props;\r\n    this.props.setBoard();\r\n    if (props.roomId || vsAI) {\r\n      this.props.setLocalPlayer([parseInt(props.player)]);\r\n\r\n      const host = process.env.REACT_APP_WS_HOST + props.roomId;\r\n      const GameClient = vsAI ? AIClient : SocketClient;\r\n      const socketClient = new GameClient();\r\n      socketClient.connect(host);\r\n      socketClient.setOnOpen(() => {\r\n        socketClient.send(gameMessage(null, null, null, true));\r\n      });\r\n      socketClient.setOnMessage((event) => {\r\n        console.log(event, event.data, JSON.parse(event.data));\r\n        // alert(event.data);\r\n        const data = JSON.parse(event.data);\r\n        if (data.needMessage) {\r\n          const {board, nowPlayer, gameOver} = this.props;\r\n          if (!gameOver) socketClient.send(gameMessage(board, nowPlayer, false));\r\n        } else {\r\n          props.onReceiveBoard(data);\r\n        }\r\n      });\r\n      socketContainer.setSocketClient(socketClient);\r\n    } else {\r\n      this.props.setLocalPlayer([0, 1]);\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const {gameOver: preGameOver} = this.props;\r\n    const {gameOver, winners} = nextProps;\r\n    console.log('judge gameOver! ', this.props, gameOver, preGameOver);\r\n    if (gameOver && !preGameOver) {\r\n      alert(`游戏结束！胜者是${winners}`);\r\n      // window.location.reload();\r\n      nextProps.resetAll();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      chessBoard, player, gameOver, roomId,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className=\"full-window\">\r\n        <div className=\"inner-window\">\r\n          {roomId ? <div>房间{roomId}</div> : ''}\r\n          <div>{chessBoard}</div>\r\n          <div>{player}</div>\r\n          <div>规则：本回合移动的己方棋子和其移动后相邻的棋子，两个棋子组成炮台，杀死处在该炮台连线上相邻的敌方棋子。如果这条直线上有4个棋子则杀不掉。当有玩家只剩1颗棋子或者无法行动时输掉。</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst flatten = arr => arr.reduce((pre, val) => pre.concat(Array.isArray(val) ? flatten(val) : val), []);\r\n\r\nfunction judgeGameOver(playerChessCount, player, board) {\r\n  const {players, order} = player;\r\n  let gameOver = false;\r\n  let winners = [];\r\n  // 判断是否只剩1棋，输掉\r\n  for (const key in playerChessCount) {\r\n    if (playerChessCount[key] <= 1) {\r\n      gameOver = true;\r\n    } else if (players[parseInt(key)]) winners.push(players[parseInt(key)].name);\r\n  }\r\n  if (!gameOver) {\r\n    // 判断是否无棋可走，输掉\r\n    winners = [];\r\n    const playerCanMoveCount = {...order};\r\n    for (const key in playerCanMoveCount) playerCanMoveCount[key] = {};\r\n    for (let i = 0; i < board.length; i++) {\r\n      for (let j = 0; j < board[i].length; j++) {\r\n        if (board[i][j].type === ChessTypes.NORMAL) {\r\n          const moveList = getNextPosList(board, i, j);\r\n          const player = board[i][j].player;\r\n          moveList.forEach((id) => {\r\n            playerCanMoveCount[player][id] = true;\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    const overs = {};\r\n    for (const key in playerCanMoveCount) {\r\n      if (Object.keys(playerCanMoveCount[key]) <= 0) {\r\n        gameOver = true;\r\n        if (players[parseInt(key)]) overs[key] = true;\r\n      }\r\n    }\r\n    if (gameOver)\r\n      for (const key in playerCanMoveCount) {\r\n        console.log(key, playerCanMoveCount[key], overs[key]);\r\n        if (players[parseInt(key)] && !overs[key]) winners.push(players[parseInt(key)].name);\r\n      }\r\n    console.log(\"playerCanMoveCount\", board, playerCanMoveCount, overs);\r\n  }\r\n  return {\r\n    gameOver,\r\n    winners\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const board = state.chessBoard.board;\r\n  const flatBoard = flatten(board);\r\n\r\n  const playerChessCount = {...state.player.order};\r\n  for (const key in playerChessCount) playerChessCount[key] = 0;\r\n  for (const i in flatBoard) {\r\n    playerChessCount[flatBoard[i].player]++;\r\n  }\r\n  const {gameOver, winners} = judgeGameOver(playerChessCount, state.player, board);\r\n  console.log(flatBoard, gameOver);\r\n  return {\r\n    gameOver,\r\n    winners: gameOver ? winners : [],\r\n    board,\r\n    nowPlayer: state.player.nowPlayer,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setLocalPlayer: (local) => {\r\n    dispatch(setLocalPlayer(local));\r\n  },\r\n  setNowPlayer: (nowPlayer) => {\r\n    dispatch(setLocalPlayer(null, nowPlayer));\r\n  },\r\n  setBoard: (board) => {\r\n    dispatch(setBoard(board));\r\n  },\r\n  resetAll: () => {\r\n    dispatch(setBoard());\r\n  },\r\n  onReceiveBoard: (data) => {\r\n    const {board, nowPlayer, isRoundEnd} = data;\r\n    console.log('will dispatch, board=', board, nowPlayer, isRoundEnd);\r\n    dispatch(setBoard(board));\r\n    if (nowPlayer || nowPlayer === 0) dispatch(setLocalPlayer(null, nowPlayer));\r\n    if (isRoundEnd) dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayControl);\r\n","import React, {Component} from 'react';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\n\r\nimport \"./menuPage.scss\";\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst buttonList = [\r\n  {title: '单挑AI', url: '/local-ai/1/0'},\r\n  {title: '本地双人', url: '/local'},\r\n  // {title: '在线双人-南位', url: '/online/123/0'},\r\n  // {title: '在线双人-北位', url: '/online/123/1'},\r\n  {\r\n    title: '网络对战', urlFunc: () => {\r\n      const randomNumber = Math.floor(Math.random() * 1000000 + 1);\r\n      return `/room/${randomNumber}`\r\n    }\r\n  },\r\n];\r\n\r\nconst menuPage = (props) => (<div className=\"menu-page\">\r\n  <div className={\"title-field\"}>\r\n    <div className=\"page-title\">\r\n      熊蛙棋\r\n    </div>\r\n  </div>\r\n  <div className=\"right-field\">\r\n    <div className=\"page-select-list\">\r\n      {buttonList.map(buttonData => {\r\n        const {title, url, urlFunc} = buttonData;\r\n        return <div>\r\n          <Button\r\n            raised className=\"mdc-button my-button\" onClick={() => {\r\n            if (urlFunc) props.history.push(urlFunc());\r\n            else props.history.push(url);\r\n          }}>\r\n            {title}\r\n          </Button></div>\r\n      })}\r\n    </div>\r\n  </div>\r\n  {/* <div><Link to=\"/\">主菜单</Link></div> */}\r\n</div>);\r\n\r\nexport default menuPage;\r\n","import React, {Component} from 'react';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\n\r\nimport \"./RoomMenu.scss\";\r\nimport Button from '@material-ui/core/Button';\r\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\r\n\r\nconst buttonList = [\r\n  {title: '玩家1进入', urlFunc: (roomId, playerId) => `/online/${roomId}/${playerId}`},\r\n  {title: '玩家2进入', urlFunc: (roomId, playerId) => `/online/${roomId}/${playerId}`},\r\n];\r\n\r\nconst OnePlayerPanel = (props) => {\r\n  const {playerName, url} = props;\r\n  return <div className='one-player-panel'>\r\n    <div>{playerName}</div>\r\n    <div>\r\n      <input className='my-input' value={url} readOnly={true}/>\r\n      <CopyToClipboard text={url}\r\n                       onCopy={() => {\r\n                       }}>\r\n        <button className='copy-button' onClick={() => {\r\n        }}>复制网址\r\n        </button>\r\n      </CopyToClipboard>\r\n    </div>\r\n    <Button\r\n      raised className=\"enter-button\" onClick={() => {\r\n      props.onJump && props.onJump();\r\n    }}>{`进入${playerName}座位`}</Button>\r\n  </div>\r\n};\r\n\r\nconst RoomMenu = (props) => {\r\n  const {history, roomId} = props;\r\n  console.log(\"location!\", props.location, window.location);\r\n  const host = window.location.host;\r\n  return (<div className=\"menu-page\">\r\n    <div className={\"title-field\"}>\r\n      <div className=\"page-info\">\r\n        网络1V1对战：把一个座位的网址发给朋友，自己进入另一个座位网址。\r\n      </div>\r\n      <div><Button outlined className=\"back-button\" onClick={() => {\r\n        props.history.push(`/`);\r\n      }}>返回主菜单</Button></div>\r\n    </div>\r\n    <div className=\"right-field\">\r\n      <div className=\"player-copy-field\">\r\n        <OnePlayerPanel playerName={\"玩家1\"} url={`${host}#/online/${roomId}/${0}`} onJump={() => {\r\n          props.history.push(`/online/${roomId}/${0}`);\r\n        }}/>\r\n        <OnePlayerPanel playerName={\"玩家2\"} url={`${host}#/online/${roomId}/${1}`} onJump={() => {\r\n          props.history.push(`/online/${roomId}/${1}`);\r\n        }}/>\r\n      </div>\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default RoomMenu;\r\n","/**\r\n * Created by yuiff on 2018/4/1.\r\n */\r\nimport React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.css';\r\nimport {Link, Switch, Route} from 'react-router-dom';\r\nimport PlayControl from './gamePlaying.js';\r\nimport menuPage from \"../../menu/menuPage\";\r\nimport RoomMenu from \"../../menu/RoomMenu\";\r\n\r\nclass RouteControl extends Component {\r\n  render() {\r\n    const {chessBoard, player, gameOver} = this.props;\r\n    const playControl = ({match, ...others}) => {\r\n      // console.log(\"playControl\", match, others, this.props);\r\n      return <PlayControl {...this.props} roomId={match.params.roomId}\r\n                   player={match.params.playerId} vsAI={match.params.hasAI}/>;\r\n    }\r\n    const roomControl = (props) => {\r\n      const {match} = props;\r\n      return <RoomMenu {...props} roomId={match.params.roomId}/>\r\n    };\r\n    return (\r\n      <div className=\"full-window\">\r\n        <div className=\"inner-window\">\r\n          <Switch>\r\n            <Route path=\"/local\" component={playControl}/>\r\n            <Route path=\"/local-ai/:hasAI/:playerId\" component={playControl} />\r\n            <Route path=\"/online/:roomId/:playerId\" component={playControl}/>\r\n            <Route exact path=\"/\" component={menuPage}/>\r\n            <Route path=\"/room/:roomId\" component={roomControl}/>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\n\r\nexport default connect(mapStateToProps)(RouteControl);\r\n","import {SELECT, MOVE_TO, SET_BOARD} from './actionTypes.js';\r\nimport {findChessPos, socketContainer} from '../utils';\r\nimport {ChessTypes} from '../constants.js';\r\nimport {createBearFrogBoard} from '../utils/';\r\nimport {gameMessage} from '../utils/controlClients/SocketClient';\r\nimport {doMoveAction} from \"../utils/boardUtils\";\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case SELECT: {\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        selected: true,\r\n        selectId: action.id,\r\n      };\r\n    }\r\n    case MOVE_TO: {\r\n      const now = findChessPos(state.board, state.selectId);\r\n      const {x, y} = findChessPos(state.board, action.id);\r\n      const board = state.board;\r\n      console.log(now.x, now.y, x, y, state.selectId, action.id, state.board);\r\n      const newBoard = doMoveAction(board, now, x, y);\r\n      if (socketContainer.getSocketClient()) {\r\n        socketContainer.getSocketClient()\r\n          .send(gameMessage(newBoard, null, true));\r\n      }\r\n      return {\r\n        ...state,\r\n        board: newBoard,\r\n        selected: false,\r\n      };\r\n    }\r\n    case SELECT: {\r\n      return state.filter(todoItem => todoItem.id !== action.id);\r\n    }\r\n    case SET_BOARD: {\r\n      console.log('SET_BOARD!REDUCER, got action:', action);\r\n      const board = action.board ? action.board : createBearFrogBoard();\r\n      return {\r\n        ...state,\r\n        board,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { select, moveTo } from '../actions.js';\r\nimport { roundEnd } from '../../player/actions';\r\nimport ChessItem from './chessItem.js';\r\n\r\nimport './style.css';\r\n\r\nconst ChessBoard = ({ board, onSelect, onMoveTo }) => {\r\n  let rowKey = 0;\r\n  return (\r\n    <div className=\"chess-board\">\r\n      {\r\n                board.map(row => (\r\n                  <div className=\"row\" key={rowKey++}>\r\n                    {row.map((item, index) => (\r\n                      <ChessItem\r\n                        key={index}\r\n                        chessId={item.id}\r\n                        player={item.player}\r\n                        type={item.type}\r\n                        onSelect={() => onSelect(item.id)}\r\n                        onMoveTo={() => onMoveTo(item.id)}\r\n                      />\r\n                        ))}\r\n                  </div>\r\n                ))\r\n            }\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  board: state.chessBoard.board,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onSelect: (id) => {\r\n    dispatch(select(id));\r\n  },\r\n  onMoveTo: (id) => {\r\n    dispatch(moveTo(id));\r\n    dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChessBoard);\r\n\r\n","import { SET_LOCAL_PLAYER, ROUND_END } from './actionTypes.js';\r\n\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case ROUND_END: {\r\n      const newState = {\r\n        ...state,\r\n        nowPlayer: state.order[(state.order.indexOf(state.nowPlayer) + 1) % state.order.length],\r\n      };\r\n      return newState;\r\n    }\r\n    case SET_LOCAL_PLAYER: {\r\n      const nextState = {\r\n        ...state,\r\n        nowPlayer: action.nowPlayer ? action.nowPlayer : 0,\r\n      };\r\n      if (action.local) { nextState.local = action.local; }\r\n      return nextState;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { setLocalPlayer } from '../actions.js';\r\nimport CardItem from './cardItem.js';\r\n\r\nclass PlayerZone extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.render = this.render.bind(this);\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidUpdate(preProps) {\r\n    const isNowPlayer = this.props.isNowPlayer;\r\n    const onRemoveCard = this.props.onRemoveCard;\r\n    const isComputer = this.props.isComputer;\r\n    const player = this.props.player;\r\n    const cards = this.props.cards;\r\n    const nowPlayer = this.props.nowPlayer;\r\n    const life = this.props.life;\r\n    console.log('AI', isNowPlayer, isComputer, player, nowPlayer);\r\n    if (isNowPlayer && isComputer && life > 0) {\r\n      const length = cards.length;\r\n      const selectCardIndex = Math.floor(Math.random() * length);\r\n      const selectCardId = cards[selectCardIndex].id;\r\n      onRemoveCard(selectCardId, player);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // const cards = this.props.cards;\r\n    const player = this.props.player;\r\n    const life = this.props.life;\r\n    const onRemoveCard = this.props.onRemoveCard;\r\n    const noCard = this.props.noCard;\r\n    const isComputer = this.props.isComputer;\r\n    if (noCard && !isComputer) {\r\n      let str = `出完了！你还剩${life}星星，`;\r\n      if (life === 3) str += '能够全身而退，无敌。';\r\n      else if (life < 3) str += '不足3颗，完蛋了。';\r\n      else str += '赚到。';\r\n      alert(str);\r\n      if (life >= 3) window.location.href = 'http://www.yuiffy.com/hebi.html';\r\n      else window.location.href = 'http://www.yuiffy.com/mario.html';\r\n    }\r\n    return (\r\n      <div className=\"playerZone\">\r\n        {\r\n                    life <= 0 ?\r\n                      <div className=\"dead\">\r\n                            死了。\r\n                      </div>\r\n                        :\r\n                        // life!==0\r\n                      <div>\r\n                        {player}\r\n                        {/* <div className=\"cardZone\"> */}\r\n                        {/* { */}\r\n                        {/* cards.map((item) => ( */}\r\n                        {/* <CardItem */}\r\n                        {/* key={item.id} */}\r\n                        {/* type={item.type} */}\r\n                        {/* player={player} */}\r\n                        {/* onRemove={() => onRemoveCard(item.id, player)} */}\r\n                        {/* /> */}\r\n                        {/* )) */}\r\n                        {/* } */}\r\n                        {/* </div> */}\r\n                        <div className=\"lifeZone\">\r\n                          {\r\n                                    Array.from(Array(life), () => '★').map(item => (\r\n                                      <span>{item}</span>\r\n                                    ))\r\n                                }\r\n                        </div>\r\n                      </div>\r\n                }\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPlayerZone.propTypes = {\r\n  cards: PropTypes.array.isRequired,\r\n  life: PropTypes.number.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  cards: state.player.players[ownProps.player].cards,\r\n  life: state.player.players[ownProps.player].life,\r\n  noCard: false,\r\n  isComputer: state.player.players[ownProps.player].isComputer,\r\n  isNowPlayer: state.player.nowPlayer === ownProps.player,\r\n  nowPlayer: state.player.nowPlayer,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onRemoveCard: (id, player) => {\r\n    dispatch(setLocalPlayer(id, player));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayerZone);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { playCard } from '../actions.js';\r\n\r\nconst CardItem = ({\r\n  type, active, isShow, onRemove,\r\n}) => {\r\n  let typeShow = '';\r\n  switch (type) {\r\n    case 0:\r\n      typeShow = '石头';\r\n      break;\r\n    case 1:\r\n      typeShow = '剪刀';\r\n      break;\r\n    case 2:\r\n      typeShow = '布';\r\n      break;\r\n  }\r\n  return (\r\n    <div\r\n      className=\"card\"\r\n      onClick={active ? onRemove : null}\r\n      style={{\r\n                 backgroundColor: active ? 'yellow' : 'white',\r\n             }}\r\n    >\r\n      {active || isShow ? typeShow : ''}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nCardItem.propTypes = {\r\n  type: PropTypes.string.isRequired,\r\n  active: PropTypes.bool.isRequired,\r\n  isShow: PropTypes.bool,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  active: state.game.nowPlayer === ownProps.player && state.game.players[ownProps.player].cardPlayed.length === 0,\r\n});\r\n\r\n\r\nexport default connect(mapStateToProps)(CardItem);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n// import {bindActionCreators} from 'redux';\r\nimport CardItem from './cardItem.js';\r\nimport { playCard, showHand, roundEnd } from '../actions.js';\r\n// import {FilterTypes} from '../../constants.js';\r\n\r\nconst PublicZone = ({ nowPlayerName, roundEnd }) => (\r\n  <div className=\"\" onClick={roundEnd}>\r\n            现在轮到{nowPlayerName}行动\r\n  </div>\r\n);\r\n\r\nconst mapStateToProps = state => ({\r\n  nowPlayerName: state.player.players[state.player.nowPlayer].name,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  roundEnd: () => {\r\n    dispatch(roundEnd());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicZone);\r\n\r\n","import React from 'react';\r\nimport PlayerZone from './playerZone.js';\r\nimport PublicZone from './publicZone.js';\r\n\r\nimport './style.css';\r\n\r\nexport default () => (\r\n  <div className=\"\">\r\n    <PublicZone />\r\n  </div>\r\n);\r\n\r\n","import React from 'react';\r\nimport { view as GameControl } from './gameControl/';\r\nimport { view as ChessBoard } from './chessBoard/';\r\nimport { view as Player } from './player/';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\n\r\nfunction App() {\r\n  const chessBoard = <ChessBoard />;\r\n  const player = <Player />;\r\n  return (\r\n    <GameControl chessBoard={chessBoard} player={player} />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\n\r\nimport { reducer as playerReducer } from './player';\r\nimport { reducer as chessBoardReducer } from './chessBoard';\r\nimport { reducer as gameControlReducer } from './gameControl';\r\nimport { getInitState } from './utils/';\r\n\r\nconst win = window;\r\n\r\nconst reducer = combineReducers({\r\n  player: playerReducer,\r\n  chessBoard: chessBoardReducer,\r\n  gameControl: gameControlReducer,\r\n});\r\n\r\n\r\nconst middlewares = [];\r\nif (process.env.NODE_ENV !== 'production') {\r\n  middlewares.push(require('redux-immutable-state-invariant').default());\r\n}\r\n\r\nconst storeEnhancers = compose(\r\n  applyMiddleware(...middlewares),\r\n  (win && win.devToolsExtension) ? win.devToolsExtension() : f => f,\r\n);\r\n\r\nexport default createStore(reducer, getInitState(), storeEnhancers);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport { HashRouter as BrowserRouter } from 'react-router-dom';\r\n\r\nimport store from './Store.js';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}