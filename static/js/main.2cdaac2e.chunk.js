(window["webpackJsonpbear-frog-chess"]=window["webpackJsonpbear-frog-chess"]||[]).push([[0],{30:function(e,t,n){},39:function(e,t,n){e.exports=n(58)},48:function(e,t,n){},49:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),l=n(5),i="GAME_CONTROL/RESET",s="GAME_CONTROL/UPDATE_SOCKET",u=n(7),p={NONE:"\u65e0\u68cb",NORMAL:"\u6709\u68cb"},f=n(6),d=n(4),y=function(e,t){for(var n={},r=0;r<e.length;r++)for(var a=e[r],o=0;o<a.length;o++){if(a[o].id===t){n={x:r,y:o};break}}return n},m=0,v=function(e,t){return{id:m++,player:e,type:t}},h=function(){return[[v(1,p.NORMAL),v(1,p.NORMAL),v(1,p.NORMAL),v(1,p.NORMAL)],[v(1,p.NORMAL),v(null,p.NONE),v(null,p.NONE),v(1,p.NORMAL)],[v(0,p.NORMAL),v(null,p.NONE),v(null,p.NONE),v(0,p.NORMAL)],[v(0,p.NORMAL),v(0,p.NORMAL),v(0,p.NORMAL),v(0,p.NORMAL)]]},O=function(){return{player:{players:[{name:"\u718a\u65b9"},{name:"\u86d9\u65b9"}],order:[0,1],local:[0,1],nowPlayer:0},chessBoard:{board:h(),selected:!1,selectId:-1},gameControl:{}}},b=new(function(){function e(){Object(f.a)(this,e),this.socketClient=null,this.setSocketClient=this.setSocketClient.bind(this),this.getSocketClient=this.getSocketClient.bind(this)}return Object(d.a)(e,[{key:"setSocketClient",value:function(e){this.socketClient=e}},{key:"getSocketClient",value:function(){return this.socketClient}}]),e}());function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=n(3),N=n(14),j=n(15),P=n(16),C=(n(30),n(74)),k=n(75),S="CHESS_BOARD/SELECT",A="CHESS_BOARD/MOVE_TO",R="CHESS_BOARD/SET_BOARD",M=function(e){return{type:R,board:e}},I=function(){function e(){Object(f.a)(this,e)}return Object(d.a)(e,[{key:"connect",value:function(e){this.ws=new WebSocket(e),this.ws.onclose=function(e){e.isTrusted||alert("webSocket onClose!"+JSON.stringify(e))},this.ws.onerror=function(e){alert("webSocket onError!"+e)}}},{key:"disconnect",value:function(){this.ws.close(1e3,"\u6b63\u5e38\u5173\u95ed")}},{key:"send",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"setOnMessage",value:function(e){this.ws.onmessage=e}},{key:"setOnOpen",value:function(e){this.ws.onopen=e}}]),e}(),x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{board:e,nowPlayer:t,isRoundEnd:n,needMessage:r}},D=function(e,t){return{type:"PLAYER/PLAY",local:e,nowPlayer:t}},L=n(24);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])};function J(e,t,n){var r=e.length,a=e[0].length,o=[0,0,-1,1],c=[1,-1,0,0],l=[];for(var i in o){var s=t+o[i],u=n+c[i];s>=0&&s<r&&u>=0&&u<a&&e[s][u].type===p.NONE&&l.push(e[s][u].id)}return l}var U=function(e,t){var n=e.board,r=e.selectId;if(!e.selected)return!1;var a=y(n,r);return-1!==J(n,a.x,a.y).indexOf(t)};function Y(e,t,n,r){var a=e.map((function(e){return e.map((function(e){return T({},e)}))})),o=a[t.x][t.y];a[t.x][t.y]=a[n][r],a[n][r]=o,a[t.x][t.y].typeChangeInfo={reason:"LEAVE",x:n,y:r},a[n][r].typeChangeInfo={reason:"ARRIVE",x:t.x,y:t.y};var c=a[n][r].player;return a[t.x][t.y].player=c,function(e,t,n,r){for(var a=0;a<2;a++){var o=e.length,c=e[0].length;if(a){var l=[c,o];o=l[0],c=l[1]}for(var i=a?t:n,s=0,u=0,f=0,d=0,y=0,m=[],v=0;v<c;v++){var h=a?[i,v]:[v,i],O=Object(L.a)(h,2),b=O[0],g=O[1],E=e[b][g];E.type!=p.NONE?(s++,u=Math.max(s,u),E.player===r?(f++,d=Math.max(f,d),y++):(m.push(E),f=0)):(s=0,f=0)}if(3==u&&2==d&&2==y&&1==m.length)for(g=0;g<m.length;g++)m[g].type=p.NONE,m[g].typeChangeInfo={reason:"DIE"}}}(a,n,r,c),a}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{players:[{name:"A"},{name:"B"}],order:[0,1]},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],r=_(e),a=T({},n);for(var o in a)a[o]=0;for(var c in r)r[c].type===p.NORMAL&&a[r[c].player]++;var l=t.players,i=t.order,s=!1,u=[];for(var f in a)a[f]<=1?s=!0:l[parseInt(f)]&&u.push(parseInt(f));return s||function(){u=[];var t=T({},i);for(var n in t)t[n]={};for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)e[r][a].type===p.NORMAL&&function(){var n=J(e,r,a),o=e[r][a].player;n.forEach((function(e){t[o][e]=!0}))}();var o={};for(var c in t)Object.keys(t[c])<=0&&(s=!0,l[parseInt(c)]&&(o[c]=!0));if(s)for(var f in t)console.log(f,t[f],o[f]),l[parseInt(f)]&&!o[f]&&u.push(parseInt(f));console.log("playerCanMoveCount",e,t,o)}(),{gameOver:s,winners:u}}var W=function(e){var t=e.iconClassName,n=e.children;return a.a.createElement("div",{className:"".concat(t)},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 512 512"},a.a.createElement("text",{x:"50%",y:"50%",dominantBaseline:"central",textAnchor:"middle",style:{fontSize:"256px"}},n)))},F=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(N.a)(this,Object(j.a)(t).call(this,e,n))).state={},r}return Object(P.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.type,r=e.beSelected,o=e.canBeMoveTo,c=e.onSelect,l=e.onMoveTo,i=e.canBeSelect,s=e.typeChangeInfo,u=this.props.playerNames,f=void 0===u?["\ud83d\udc3b","\ud83d\udc38"]:u,d="chess-item ".concat(1==t?"enemy":""," ");n===p.NONE?d+="LEAVE"===s?"leave ":"DIE"===s?"die ":"normal-none  ":d+="ARRIVE"===s?"arrive ":"normal-display ";var y=f[t]||"\ud83d\udc36";return a.a.createElement("div",{className:"chess-block ".concat(r?"selected":""," ").concat(o?"can-be-move-to":""," ").concat(i&&!r?"can-be-select":""," "),onClick:function(){o?l():n!=p.NONE&&i&&c()}},a.a.createElement(W,{iconClassName:d},y))}}]),t}(a.a.Component),H=Object(l.b)((function(e,t){var n=t.chessId,r=t.player,a=t.type;return{beSelected:e.chessBoard.selected&&e.chessBoard.selectId==n,canBeMoveTo:U(e.chessBoard,n),canBeSelect:e.player.nowPlayer===r&&-1!=e.player.local.indexOf(r)&&a===p.NORMAL}}))(F);var G={getTheMove:function(e,t){for(var n=[],r=function(r){for(var a=function(a){e[r][a].type===p.NORMAL&&e[r][a].player===t&&J(e,r,a).forEach((function(t){n.push({now:e[r][a].id,next:t})}))},o=0;o<e[r].length;o++)a(o)},a=0;a<e.length;a++)r(a);var o,c;return n[(o=0,c=n.length-1,o=Math.ceil(o),c=Math.floor(c),Math.floor(Math.random()*(c-o+1))+o)]},getNextBoard:function(e,t){console.log("AI getNextBoard board?!",e,t);var n=G.getTheMove(e,t),r=e;if(n){var a=y(e,n.now),o=y(e,n.next);console.log("getNextBoard theMove",n,a,o),r=Y(e,a,o.x,o.y)}return r}},K=G,Z=function(){function e(){Object(f.a)(this,e),this.funcs={onMessage:function(){},onOpen:function(){}},this.store={timeout:0}}return Object(d.a)(e,[{key:"connect",value:function(e){}},{key:"disconnect",value:function(){clearTimeout(this.store.timeout)}},{key:"send",value:function(e){var t=this;console.log("AIClient send",e),clearTimeout(this.store.timeout),this.store.timeout=setTimeout((function(){e.nowPlayer,e.isRoundEnd;if(!V(e.board).gameOver){var n={board:K.getNextBoard(e.board,1),isRoundEnd:!1,needMessage:!1,nowPlayer:0};t.funcs.onMessage({data:JSON.stringify(n)})}}),1e3)}},{key:"setOnMessage",value:function(e){this.funcs.onMessage=e}},{key:"setOnOpen",value:function(e){this.funcs.onOpen=e}}]),e}(),z=function(e){function t(e){var n;Object(f.a)(this,t),n=Object(N.a)(this,Object(j.a)(t).call(this,e)),console.log("PlayControl\u3000constructor",e);e.roomId;var r=e.vsAI;e.player;if(n.props.setBoard(),e.roomId||r){n.props.setLocalPlayer([parseInt(e.player)]);var a="ws://rank.yuiffy.com:8089/bearFrogChess/"+e.roomId,o=new(r?Z:I);o.connect(a),o.setOnOpen((function(){o.send(x(null,null,null,!0))})),o.setOnMessage((function(t){console.log(t,t.data,JSON.parse(t.data));var r=JSON.parse(t.data);if(r.needMessage){var a=n.props,c=a.board,l=a.nowPlayer;a.gameOver||o.send(x(c,l,!1))}else e.onReceiveBoard(r)})),b.setSocketClient(o)}else n.props.setLocalPlayer([0,1]),b.getSocketClient()&&(b.getSocketClient().disconnect(),b.setSocketClient(null));return n}return Object(P.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.gameOver,r=e.gameOver,a=e.winners;console.log("judge gameOver! ",this.props,r,n),r&&!n&&setTimeout((function(){alert("\u6e38\u620f\u7ed3\u675f\uff01\u80dc\u8005\u662f".concat(t.getPlayerNames()[a])),e.resetAll()}),1e3)}},{key:"componentWillUnmount",value:function(){b.getSocketClient()&&(b.getSocketClient().disconnect(),b.setSocketClient(null))}},{key:"getPlayerNames",value:function(){var e=this.props.params,t=["\ud83d\udc3b","\ud83d\udc38"];return e.playerNames&&(t=JSON.parse(e.playerNames)),t}},{key:"render",value:function(){var e=this.props,t=e.ChessBoard,n=e.player,r=(e.gameOver,e.roomId);e.params;return a.a.createElement("div",{className:"full-window"},a.a.createElement("div",{className:"inner-window"},r?a.a.createElement("div",null,"\u623f\u95f4",r):"",a.a.createElement("div",null,a.a.createElement(t,{playerNames:this.getPlayerNames()})),a.a.createElement("div",null,n),a.a.createElement("div",null,"\u89c4\u5219\uff1a\u672c\u56de\u5408\u79fb\u52a8\u7684\u5df1\u65b9\u68cb\u5b50\u548c\u5176\u79fb\u52a8\u540e\u76f8\u90bb\u7684\u68cb\u5b50\uff0c\u4e24\u4e2a\u68cb\u5b50\u7ec4\u6210\u70ae\u53f0\uff0c\u6740\u6b7b\u5904\u5728\u8be5\u70ae\u53f0\u8fde\u7ebf\u4e0a\u76f8\u90bb\u7684\u654c\u65b9\u68cb\u5b50\u3002\u5982\u679c\u8fd9\u6761\u76f4\u7ebf\u4e0a\u67094\u4e2a\u68cb\u5b50\u5219\u6740\u4e0d\u6389\u3002\u5f53\u6709\u73a9\u5bb6\u53ea\u52691\u9897\u68cb\u5b50\u6216\u8005\u65e0\u6cd5\u884c\u52a8\u65f6\u8f93\u6389\u3002")))}}]),t}(r.Component),Q=Object(l.b)((function(e){var t=e.chessBoard.board,n=V(t,e.player,e.player.order),r=n.gameOver,a=n.winners;return{gameOver:r,winners:r?a:[],board:t,nowPlayer:e.player.nowPlayer}}),(function(e){return{setLocalPlayer:function(t){e(D(t))},setNowPlayer:function(t){e(D(null,t))},setBoard:function(t){e(M(t))},resetAll:function(){e(M())},onReceiveBoard:function(t){var n=t.board,r=t.nowPlayer,a=t.isRoundEnd;console.log("will dispatch, board=",n,r,a),e(M(n)),(r||0===r)&&e(D(null,r)),a&&e({type:"PLAYER/ROUND_END"})}}}))(z),q=(n(48),n(72)),X=[{title:"\u5355\u6311AI",url:"/local-ai/1/0"},{title:"\u672c\u5730\u53cc\u4eba",url:"/local"},{title:"\u7f51\u7edc\u5bf9\u6218",urlFunc:function(){var e=Math.floor(1e6*Math.random()+1);return"/room/".concat(e)}}],$=function(e){return a.a.createElement("div",{className:"menu-page"},a.a.createElement("div",{className:"title-field"},a.a.createElement("div",{className:"page-title"},"\u718a\u86d9\u68cb")),a.a.createElement("div",{className:"right-field"},a.a.createElement("div",{className:"page-select-list"},X.map((function(t){var n=t.title,r=t.url,o=t.urlFunc;return a.a.createElement("div",null,a.a.createElement(q.a,{raised:!0,className:"mdc-button my-button",onClick:function(){o?e.history.push(o()):e.history.push(r)}},n))})))))},ee=(n(49),n(34)),te=function(e){var t=e.playerName,n=e.url;return a.a.createElement("div",{className:"one-player-panel"},a.a.createElement("div",null,t),a.a.createElement("div",null,a.a.createElement("input",{className:"my-input",value:n,readOnly:!0}),a.a.createElement(ee.CopyToClipboard,{text:n,onCopy:function(){}},a.a.createElement("button",{className:"copy-button",onClick:function(){}},"\u590d\u5236\u7f51\u5740"))),a.a.createElement(q.a,{raised:!0,className:"enter-button",onClick:function(){e.onJump&&e.onJump()}},"\u8fdb\u5165".concat(t,"\u5ea7\u4f4d")))},ne=function(e){e.history;var t=e.roomId,n=window.location,r=(n.host,n.href);n.pathname;console.log("location!",e.location,window.location);var o=r.split("#")[0];return a.a.createElement("div",{className:"menu-page"},a.a.createElement("div",{className:"title-field"},a.a.createElement("div",{className:"page-info"},"\u7f51\u7edc1V1\u5bf9\u6218\uff1a\u628a\u4e00\u4e2a\u5ea7\u4f4d\u7684\u7f51\u5740\u53d1\u7ed9\u670b\u53cb\uff0c\u81ea\u5df1\u8fdb\u5165\u53e6\u4e00\u4e2a\u5ea7\u4f4d\u7f51\u5740\u3002"),a.a.createElement("div",null,a.a.createElement(q.a,{outlined:!0,className:"back-button",onClick:function(){e.history.push("/")}},"\u8fd4\u56de\u4e3b\u83dc\u5355"))),a.a.createElement("div",{className:"right-field"},a.a.createElement("div",{className:"player-copy-field"},a.a.createElement(te,{playerName:"\u73a9\u5bb61",url:"".concat(o,"#/online/").concat(t,"/",0),onJump:function(){e.history.push("/online/".concat(t,"/",0))}}),a.a.createElement(te,{playerName:"\u73a9\u5bb62",url:"".concat(o,"#/online/").concat(t,"/",1),onJump:function(){e.history.push("/online/".concat(t,"/",1))}}))))},re=n(35),ae=n.n(re),oe=function(e){function t(){return Object(f.a)(this,t),Object(N.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.chessBoard,t.player,t.gameOver,function(t){var n=t.match,r=t.location,o=Object(w.a)(t,["match","location"]);console.log("playControl",n,o,e.props);var c=ae.a.parse(r.search,{ignoreQueryPrefix:!0});return a.a.createElement(Q,Object.assign({},e.props,{roomId:n.params.roomId,player:n.params.playerId,vsAI:n.params.hasAI,params:c}))});return a.a.createElement("div",{className:"full-window"},a.a.createElement("div",{className:"inner-window"},a.a.createElement(C.a,null,a.a.createElement(k.a,{path:"/local",component:n}),a.a.createElement(k.a,{path:"/local-ai/:hasAI/:playerId",component:n}),a.a.createElement(k.a,{path:"/online/:roomId/:playerId",component:n}),a.a.createElement(k.a,{exact:!0,path:"/",component:$}),a.a.createElement(k.a,{path:"/room/:roomId",component:function(e){var t=e.match;return a.a.createElement(ne,Object.assign({},e,{roomId:t.params.roomId}))}}))))}}]),t}(r.Component),ce=Object(l.b)((function(e){return{}}))(oe);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(56);var se=Object(l.b)((function(e){return{board:e.chessBoard.board}}),(function(e){return{onSelect:function(t){e(function(e){return{type:S,id:e}}(t))},onMoveTo:function(t){e(function(e){return{type:A,id:e}}(t)),e({type:"PLAYER/ROUND_END"})}}}))((function(e){var t=e.board,n=e.onSelect,r=e.onMoveTo,o=e.playerNames,c=0;return a.a.createElement("div",{className:"chess-board"},t.map((function(e){return a.a.createElement("div",{className:"row",key:c++},e.map((function(e,t){return a.a.createElement(H,{key:t,chessId:e.id,player:e.player,playerNames:o,type:e.type,onSelect:function(){return n(e.id)},onMoveTo:function(){return r(e.id)}})})))})))}));function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=n(8),de=(Object(l.b)((function(e,t){return{active:e.game.nowPlayer===t.player&&0===e.game.players[t.player].cardPlayed.length}}))((function(e){var t=e.type,n=e.active,r=e.isShow,o=e.onRemove,c="";switch(t){case 0:c="\u77f3\u5934";break;case 1:c="\u526a\u5200";break;case 2:c="\u5e03"}return a.a.createElement("div",{className:"card",onClick:n?o:null,style:{backgroundColor:n?"yellow":"white"}},n||r?c:"")})),function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(N.a)(this,Object(j.a)(t).call(this,e,n))).render=r.render.bind(Object(fe.a)(r)),r.state={},r}return Object(P.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.isNowPlayer,n=this.props.onRemoveCard,r=this.props.isComputer,a=this.props.player,o=this.props.cards,c=this.props.nowPlayer,l=this.props.life;if(console.log("AI",t,r,a,c),t&&r&&l>0){var i=o.length;n(o[Math.floor(Math.random()*i)].id,a)}}},{key:"render",value:function(){var e=this.props.player,t=this.props.life,n=(this.props.onRemoveCard,this.props.noCard),r=this.props.isComputer;if(n&&!r){var o="\u51fa\u5b8c\u4e86\uff01\u4f60\u8fd8\u5269".concat(t,"\u661f\u661f\uff0c");o+=3===t?"\u80fd\u591f\u5168\u8eab\u800c\u9000\uff0c\u65e0\u654c\u3002":t<3?"\u4e0d\u8db33\u9897\uff0c\u5b8c\u86cb\u4e86\u3002":"\u8d5a\u5230\u3002",alert(o),window.location.href=t>=3?"http://www.yuiffy.com/hebi.html":"http://www.yuiffy.com/mario.html"}return a.a.createElement("div",{className:"playerZone"},t<=0?a.a.createElement("div",{className:"dead"},"\u6b7b\u4e86\u3002"):a.a.createElement("div",null,e,a.a.createElement("div",{className:"lifeZone"},Array.from(Array(t),(function(){return"\u2605"})).map((function(e){return a.a.createElement("span",null,e)})))))}}]),t}(r.Component)),ye=(Object(l.b)((function(e,t){return{cards:e.player.players[t.player].cards,life:e.player.players[t.player].life,noCard:!1,isComputer:e.player.players[t.player].isComputer,isNowPlayer:e.player.nowPlayer===t.player,nowPlayer:e.player.nowPlayer}}),(function(e){return{onRemoveCard:function(t,n){e(D(t,n))}}}))(de),Object(l.b)((function(e){return{nowPlayerName:e.player.players[e.player.nowPlayer].name}}),(function(e){return{roundEnd:function(){e({type:"PLAYER/ROUND_END"})}}}))((function(e){var t=e.nowPlayerName,n=e.roundEnd;return a.a.createElement("div",{className:"",onClick:n},"\u73b0\u5728\u8f6e\u5230",t,"\u884c\u52a8")}))),me=(n(57),function(){return a.a.createElement("div",{className:""},a.a.createElement(ye,null))});var ve=function(){var e=se,t=a.a.createElement(me,null);return a.a.createElement(ce,{ChessBoard:e,player:t})},he=n(73),Oe=n(18),be=window,ge=Object(Oe.c)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER/ROUND_END":var n=pe({},e,{nowPlayer:e.order[(e.order.indexOf(e.nowPlayer)+1)%e.order.length]});return n;case"PLAYER/PLAY":var r=pe({},e,{nowPlayer:t.nowPlayer?t.nowPlayer:0});return t.local&&(r.local=t.local),r;default:return e}},chessBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return console.log(t),ie({},e,{selected:!0,selectId:t.id});case A:var n=y(e.board,e.selectId),r=y(e.board,t.id),a=r.x,o=r.y,c=e.board;console.log(n.x,n.y,a,o,e.selectId,t.id,e.board);var l=Y(c,n,a,o);return b.getSocketClient()&&b.getSocketClient().send(x(l,null,!0)),ie({},e,{board:l,selected:!1});case S:return e.filter((function(e){return e.id!==t.id}));case R:console.log("SET_BOARD!REDUCER, got action:",t);var i=t.board;return i||(i=h(),b.getSocketClient()&&b.getSocketClient().send(x(i,null,!0))),ie({},e,{board:i});default:return e}},gameControl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.NONE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return console.log("RESET!",O()),O();case s:console.log("UPDATE_SOCKET!",t.socketClient);var n=t.socketClient;return E({},e,{socketClient:n});default:return e}}});var Ee=Object(Oe.d)(Oe.a.apply(void 0,[]),be&&be.devToolsExtension?be.devToolsExtension():function(e){return e}),we=Object(Oe.e)(ge,O(),Ee);c.a.render(a.a.createElement(l.a,{store:we},a.a.createElement(he.a,null,a.a.createElement(ve,null))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2cdaac2e.chunk.js.map